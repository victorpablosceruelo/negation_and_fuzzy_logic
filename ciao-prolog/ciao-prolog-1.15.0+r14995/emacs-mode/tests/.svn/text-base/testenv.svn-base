#!/bin/sh

# Follow symbolic links
self_exec=`test -L "$0" && readlink "$0" || echo "$0"`
# Obtain the directory where this script is located
old_dir=`pwd`; cd `dirname ${self_exec}`; self=`pwd`; cd ${old_dir}; old_dir=

# ===========================================================================

# Or, by hand: 
# gmake compile; gmake install; emacs /tmp/foo.pl
# 
# gmake compile; gmake install; xemacs /tmp/foo.pl
# 
# xemacs -l ciao-xemacs-simpler-toolbar.el -f ciao-xemacs-setup-toolbar &
# 
# emacs -l ciao-xemacs-simpler-toolbar.el -f ciao-setup-toolbar

MODEDIR="${self}/.."
ciaosetup build emacs_mode

case $1 in
    mac ) /Applications/Emacs.app/Contents/MacOS/Emacs -q \
          -l ${MODEDIR}/ciao-mode-init.el $2 ;; # -f ciao-browse-preprocessor-options ;;
    mac22 ) /Applications/Emacs22.3/Emacs.app/Contents/MacOS/Emacs -q \
          -l ${MODEDIR}/ciao-mode-init.el $2 ;; # -f ciao-browse-preprocessor-options ;; 
    fsf21 ) /usr/bin/emacs-21.4 -geometry -0+0 -q \
          -l ${MODEDIR}/ciao-mode-init.el $2 ;; # This is what .emacs includes
# works.. -l ciao-test.el $2 ;; 
# works!  -l word-help.el -l ciao-test.el $2 ;; 
# works!  -l word-help.el -l ciao-mode-init.el -l ciao.el $2 ;; 
# works!  -l word-help.el -l ciao.el $2 ;; 
# works   -l ciao-mode-init.el -l ciao.el $2 ;; 
# no      -l ciao-mode-init.el $2 ;; # This is what .emacs includes
# works   -l ciao-mode-init.el -l ciao.el $2 ;; 
# no      -l ~/.emacs $2 ;;
# no      -l $TMPNAME -l ~/.emacs $2 ;;
# no      -l $TMPNAME -l ciao-mode-init.el.skel -l ~/.emacs $2 ;;
# works   -l $TMPNAME -l ciao-mode-init.el.skel -l ciao.el -l ~/.emacs $2 ;;
# std,wks -l $TMPNAME -l ciao-mode-init.el.skel -l ciao.el $2 ;;
    fsf22 ) /usr/local/bin/emacs-22.1.50 -geometry -0+0 -q \
	  -l ${MODEDIR}/ciao-mode-init.el $2 ;;
    x   ) xemacs -geometry -0+0-q \
          -l ${MODEDIR}/ciao-mode-init.el $2 ;;
    a   ) xterm -geometry 84x48-100+0 -fn 10x20 -ie +sb -e emacs -nw \
          -l ${MODEDIR}/ciao-mode-init.el $2 ;;
    info ) /Applications/Emacs.app/Contents/MacOS/Emacs -q \
          -l ${MODEDIR}/ciao-mode-init.el -l ${MODEDIR}/pretty-mode.el /tmp/foo.el ;; 
    *   ) echo "Usage: $0 <mac|mac22|fsf21|fsf22|x|a> <file>"
          exit 0  ;;
esac






