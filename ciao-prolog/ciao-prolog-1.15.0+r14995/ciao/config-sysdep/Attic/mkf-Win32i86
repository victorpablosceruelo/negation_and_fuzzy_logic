# -*- mode: Makefile; -*-
# Misc. options, depending on the SETTINGS file

ifeq ($(DEBUG_LEVEL),profile)
    DEBUG_FLAGS=-DDEBUG -DATOMGC -DPROFILE
#    DEBUG_FLAGS=-DPROFILE
#    PROFILE_LD_FLAGS=-pg
    OPTIM_LEVEL=debug
    OPTIM_FLAGS=
else
ifeq ($(DEBUG_LEVEL),profile-debug)
    DEBUG_FLAGS=-g -Wall -DDEBUG -DATOMGC -DGLOBVARS -DINTERNAL_CALLING -DPROFILE
#   PROFILE_LD_FLAGS=-pg
    OPTIM_LEVEL=debug
    OPTIM_FLAGS=
endif
endif

LD_PROFILE_FLAGS=-

# Optimizations for x86


ifeq ($(OPTIM_LEVEL),optimized)
    OPTIM_FLAGS=-O2 -fno-strict-aliasing -fomit-frame-pointer $(shell $(SYSDEP_FILES)/gcc_m_or_f_options)
endif


# Threads and locks in Win32: no threads, no locks so far.
LD_THREAD_LIB=
LD_LOCK_LIB=
THREAD_FLAG= -DTHREADS

#ifeq ($(USE_THREADS),yes)
#    LD_THREAD_LIB=-lpthread
#    LD_LOCK_LIB=
#ifeq ($(USE_POSIX_LOCKS),yes)
#    THREAD_FLAG=-D_REENTRANT -DTHREADS
#else
#    THREAD_FLAG=-D_REENTRANT -DTHREADS
#endif
#else
#    LD_THREAD_LIB=
#    THREAD_FLAG=
#endif



FOREIGN_FILES_FLAG=-DFOREIGN_FILES

#  Local C compiler
LCC=$(CC)

# C compiler
CC=gcc

# Linker
LD=gcc

# C compiler options for generating shared libraries code
CCSHARED=

# Linker specific options
# "-rdynamic" allows the dynamic libraries symbols to be resolved against
# those defined in ciaoengine
LINK_FLAGS=

# Hack not to show a default console in Windows: used by the engine
# Makefile when compiling a static engine.
#NOCONSOLEFLAG=-mwindows
# Hack not to use Cygwin's but Microsoft libraries
NOCONSOLEFLAG=-mno-cygwin

# Linker options for shared objects
LDSHARED=-shared

# Linker options to combine objects
LDCOMBINE=-r

# Extension of shared libraries
SOSUFFIX=.dll

# Standard libraries
LIBS=

ARCHNAME=i86

# Operating system version
OSNAME=Win32

# Memory management primitives
# See engine/configure.c: HAS_MMAP includes USE_OWN_MALLOC
MEM_MNG_FLAG=-DHAS_MMAP -DANONYMOUS_MMAP

# How to install an make directories
MKDIR="mkdir -p"
INSTALL=install

# Making etags
ETAGS=

#CFLAGS:=$(CFLAGS) -DSTATICENG
DEFAULTYPE=dyn

# Specifies if the engine will be in a shared library (dyn)
# or in an executable (unassigned).  By now is here, but
# should be configurable by the user
ENGLOCATION=dyn
