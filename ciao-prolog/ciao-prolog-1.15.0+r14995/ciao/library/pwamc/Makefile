#*          Copyright (C)1990-96 UPM-CLIP				*

# ****** PWAMC Makefile *************************************************
# Change settings for make in file SETTINGS
# include SETTINGS
SHELL=/bin/sh 
MAKE=gmake
MODULE=ciao
NOMODULE=user
# No need to change under this line (hopefully)
# ***********************************************************************

FILES=pwamql.ql plpwam.ql builtins_pwam.ql 

.SUFFIXES: .ql .pl

.pl.ql:
	@echo "[prolog_dependent], $(COMMAND)." | $(PROLOG) || \rm -f $*.ql
	@-chmod $(MODE) $*.ql
	@-chmod ugo-x $*.ql

pwamc: $(FILES) prolog_dependent.pl pwamc.pl

pwamc.pl: Makefile SETTINGS module.pl
	@-\rm -f pwamc.pl
	@echo '%%  DO NOT EDIT THIS FILE: '			 > pwamc.pl
	@echo '%%  it is generated automatically by Makefile.'	>> pwamc.pl
	@echo							>> pwamc.pl
	@echo ":- $(LIBRARY)."					>> pwamc.pl
	@echo							>> pwamc.pl
	@cat module.pl						>> pwamc.pl
	@for i in $(FILES) ; \
	do echo ":- $(LOADQL)('$$i')."				>> pwamc.pl ; \
	done

install:	
	-mkdir $(LIB)
	@-mkdir $(LIB)/pwamc
	@-cp *.ql $(LIB)/pwamc

clean:
	@-rm -f *~ *#

realclean:	clean
	@-rm -f *.ql

distclean: realclean
