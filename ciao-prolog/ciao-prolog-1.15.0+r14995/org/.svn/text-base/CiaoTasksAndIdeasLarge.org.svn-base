# -*- coding: iso-latin-1 -*-
Ciao Tasks and Ideas
#+CATEGORY: Ciao
#+STYLE: <link rel="stylesheet" type="text/css" href="ciao-org.css"/>
#+BEGIN_OPTIONS
#+TODO: TODO STARTED FUTURE POSTPONED PROPOSAL | DONE CANCELED
#+END_OPTIONS
* Look at LOTS OF OTHER IDEAS (need to reorganize) in Manuel's task file
* Meetings
** Ciao Weekly Meeting <2010-03-10 Wed 12:30 +1w> 
*** Automatic configuration of components (gsl, ppl ...)
** Jan 15, 2010								:ALL:
*** Lpdoc documentation of exceptions, etc.
*** compound needs to be implemented properly (simple) 			 :EM:
*** Call stack trace gathering builtin (plus flag to turn off lco?) 	 :JF:
*** Variable names in debugger 						 :EM:
*** Preconditions in unitest 					      :RH:EM:
*** runtime checks optimizations 					 :EM:
*** Archive							    :ARCHIVE:
**** DONE How to debug the bugs recently introduced by Remy in Ciao (ISO) :EM:
     :PROPERTIES:
     :ARCHIVE_TIME: 2010-02-15 Mon 17:33
     :END:
**** DONE Split exceptions						 :JF:
     :PROPERTIES:
     :ARCHIVE_TIME: 2010-02-15 Mon 17:33
     :END:
     - Need to have a default intercept
** Archive							    :ARCHIVE:
*** Ciao Meeting <2010-01-08 Fri 12:00> 				:ALL:
*** Ciao Meeting <2009-03-26 Thu>					:ALL:
    :PROPERTIES:
    :ARCHIVE_TIME: 2009-06-04 Thu 20:54
    :END:
*** DONE Ciao Meeting <2010-01-08 Fri 12:00>				:ALL:
    CLOSED: [2010-01-09 Sat 11:55]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-09 Sat 11:55
    :END:
*** Ciao Weekly Meeting [2010-02-05 Fri 12:00 +1w]			:ALL:
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-03-08 Mon 17:26
    :END:
* [[/home/herme/prologs/prolog-commons][POINTER TO PROLOG COMMONS]]
* ISO suggestions
** Syntax:
*** Give character "`" a more useful use, either as graphic_char or with a
  defined meaning.
*** Use 0'' for the character code of "'", not 0'''.

** Builtins:
*** Add (#)/2 as integer bitwise exclusive or (xor) to arithmetic
  functions.

*** Add name/2 to builtins?

*** New exception handling builtin: intercept/3.
   intercept(Goal, Error, Handler): Executes Goal.  If an
   exception is raised during its execution, Error is unified with
   the exception, and if the unification succeeds, Handler is
   executed and then the execution resumes after the predicate which
   produced the exception.  Note the difference with builtin
   catch/3. Given the code

p(X) :- throw(error), write('---').
p(X) :- write(X).

   the execution of
   "intercept(p(0), E, write(E)), write(.), fail." results in
   the output "error---.0.". 

** Declarations:
*** set_prolog_flag/2 & op/3 should be local, at least inside a module.

*** data/1 declaration? & asserta_fact/1, etc.

** Modules:

*** Do not allow calling non-exported predicates from other modules,
  except by especial builtins.

*** Biyective relation between modules and files (except for the user module).

*** Notion of packages (files to be *included*). Must be distinguished.

** Other Possibilities:

*** Classify the standard by levels: a minimum, pure level, next level, etc.

*** Extension possibilities: expand term needs to be improved

*** Standardize DCGs

*** Standardize a minimum set of libraries! (based on the module standard)

* BUGS: see in sources bug dirs and bug declarations in files
* Installation/porting:
** TODO [#C] Fix Pillow compilation 
** TODO [#D] Ciao on vista, 7 (check)
** TODO [#D] Ciao as ubuntu package, RPM, etc.
** TODO [#D] Ciao distribution
   - List invited papers of ciao at ciao site (and plans).
   - The command 'ciao' actually starts emacs if emacs is
     accessible, and we are in a windows environment. In a terminal, then
     emacs -nw, etc. (and have a -nw option!).
   - Do something with gumstix demo: put on web site, paper.
   - Leaflet, "Prolog" places: downloader! Screenshots. Comp errors.
   - Biochem CS591 project thing etc. and other projects: put it online. 
* Ideas
** TODO Scripts don't work?
** Object oriented extensions
*** Dylan's homepage is http://www.opendylan.org/; OO features of Ciao
** Hiord and meta programming
*** Fix metacall						       :REMY:
** Performance
*** Check speed periodically, have a framework for doing it
** Foreign interface
*** C interface: make reentrant
** LPdoc
*** Idea of module-level properties: being iso, no seffs, etc.
*** info entries now fit in one line (fix in lpdoc-generated info files)
*** Author names should appear in the table of contents? (optionally)
** Graphical interfaces
*** gtk bindings etc. for Ciao -- connect to objects?
** Propaganda
*** Add a Ciao entry in Francesca's site!!! (Rest are there!!!!).
*** Enter computer language SHOOTOUT Shootout
*** IDEA: Testing killer app for decl languages?
*** Remember to update ciao entry in Wikipedia (and look at Mercury, Oz. 
    There is a Prolog page and also the bad logic programming page.)
*** Work on page ranking for Ciao
** CiaoPP
*** Meet w/Paco about prop assertions 
*** Idea: packages that 'drive' ciaopp.
*** bftypes
*** Make :- regtype color/1 := red | blue | green. work.
*** 'Assume' alias for 'trust'? (Used by verifiers.)
*** Do multi-indexing with global analysis. 
*** Analysis sees expansion of X!, compilation does not and uses setarg, etc. Use the idea of expansions that are applied or not depending on stage.
** Emacs Mode (IDE)
*** PROPOSAL One thing that I think would be a major improvement over vim's Mercury
    syntax file would be highlighting foreign_{proc, code} with the syntax
    highlighting of the target language, rather than just as a string.
** Internal: system maintenance
*** Mac login / VNC: 129.24.143.120, clipmac (?) 
** Coinduction
*** Check Gopal's Yaptab coninductive implementation (check wrt lazyness). :RH:
** Functional notation
*** Implement real 'function' declaration.
*** Extend assertions to have funcs etc.
** Unclassified
*** clause undefined!
*** Do afall?
*** Ciao in GCC -- useful to GGCC!
*** use_module(auto). or something like that.
*** Send PiLLoW ideas to bardo/boris -> scan them!
*** Need clpqall (so that all = > etc. are translated: good if using functions)
*** runtests     Executes the tests that has been configured in the system.
*** Install Ciao on CS machines (do it in my account first and test)
*** Check out latest Ciao on Eclipse, include (pointer?) in dist 
    http://eclipse.ime.usp.br/projetos/grad/plugin-prolog/index.html
** DONE URGENT: http://www.informatik.uni-kiel.de/~mh/FLP/implementations.html
   CLOSED: [2012-09-14 Fri 18:00]
** CANCELED Check out http://www.codecomments.com/Prolog/
   The page does not exist anymore.
   CLOSED: [2012-09-14 Fri 18:01]
** Get Podelski's thing and run it on Ciao (download: [[http://mpi-sb.mpg.de/~rybal/armc]])
* Other pending tasks:
** TODO [#C] Ciao messages (Amato)
** TODO [#B] Answer for Peter VanRoy
** TODO [#D] Ciao list: who is moderating?
** TODO [#D] set_prolog_flag --> set_ciao_flag :EM:
** TODO [#C] Organize tasks and Ciao/CiaoPP meetings
   Org. - Tasks files - Task forces - Responsible people
   Empty /home/herme/ORG/tasks! 
** Prolog Standard messages
** IDEA: use the monads transformation idea for *testing* side effects?
** Polyhedra analysis should issue *warning* and not run when dummy lib is used. --bad solution in any case...
** Move lazy out of contrib?
** POPL Invited speaker, Chet Murthy: (ML) claims will try logic programming next --talk to him? Find out what? Go and see him?
** compilation in CS machines shows the NFS compilation problem!
** There is a draft ISO standard for first order logic syntax
* Repos
** Move to Git?
** (Discussion) Provide read access to repository
   - No problem with Ciao etc.
   - CiaoPP not sure, perhaps not 
   - Move the most mature parts of CiaoPP to Ciao/the Ciao compiler?
* Reorganization of Ciao directory structure
** CiaoDE -> Ciao
*** ciao -> ciaosys?
*** ciaopp -> preprocessor? or ciaopp?
*** lpdoc
*** emacs-mode -> ide/emacs?
*** ide/eclipse
* Ciao Emacs Mode:
** TODO [#A] Some urgent bugs
*** TODO [#A] Finish queue implementation
    Process creation must be automatic.

    No explicit '...-w' and '...-nw' (add the prompt wait mark in
    send-command?)

    'Enqueue' may execute commands as soon as it starts, as long as no
    command is left in the queue if it can be executed (i.e., if there
    is a prompt)
*** TODO remove ciaopp stuff from ciao-process, try to add debugger stuff as some hook
*** TODO Do not ALWAYS switch buffers when sending commands
    Window handling must be (almost) completely separated from ciao-process
**** TODO When you run LPdoc on a file and there are no errors the cursor :MH:
     stays at the end in the LPdoc buffer but it should return to the
     original file (as when loading a ciao file into the top level).

     Not 100% sure of this but the processing should probably happen in
     the background (a la AuCTeX), without showing the LPdoc buffer
     (unless there are errors), unless the LPdoc buffer was already
     visible.
**** TODO Same with CiaoPP: when you run it on a file (e.g., check assertions) :MH:
     and there are no errors the cursor stays at the end in the CiaoPP
     buffer and it should return to the original file (as when loading a
     ciao file into the top level).

     Try for example

     : :- pred p/1 => atm.
     :
     : p(a).

     and

     : :- pred p/1 => int.
     :
     : p(a).

     with the check assertions button.
**** TODO If there are errors, at the end of the error messages (C-c ` after :MH:
     last error) the cursor also does not return to the original buffer
     as it should?

     Also, it changes the window layout (should not do it). It does not
     happen on the other hand if you cancel the parsing of errors (i.e.,
     C-c e does not seem to change layout).

**** TODO The window behavior of C-c M is a bit erratic. Start for example :MH:
     with emacs split into 4 windows and hit C-M and then Apply
     repeatedly to see what I mean.

     In any case what we have to do here is do the processing in the
     CiaoPP buffer without changing: it should not be visible unless the
     CiaoPP buffer was already visible and in any case we should not
     change window layout.

*** TODO With C-c l, the process buffer must be selected if there are no errors
*** TODO Show cursor on ciao-widgets, if we move it
*** TODO Allow structures in inferior-hook (that will simplify ciao-process, and avoid problems)
**** TODO use symbol put get (propery list) 
*** TODO inferior-hooks are WRONG
    Most are set after ciao-send-command, while the should be before.
    Add a delay in ciao-send-command to test it.
*** TODO Really make ciao-process independent
*** TODO Avoid circular dependency with ensure-inferior-mode
*** TODO Allow bare inferior modes, without anything except communication
    Testing it by hand raised some errors (easy to solve)
*** TODO In ciao-widgets sometimes the last word 'none' is moved... FIX
*** TODO Use markers in error structure instead of line numbers?
    That would make error highlight more robust. For example, if we
    introduce some lines before the error, line numbers DO move!
    We do not want this.

    Partially done for the beginning of errors in the inferior mode.

*** TODO Implement fly-compile as an example of the new design.

    We can do check, compile, disassemble, analyze, etc. But
    fly-execution is dangerous. Remember that when loading modules with
    packages, as that would hide unexpected fly-executions.
*** TODO Try to remove last-process-buffer if possible? Associate to the buffers.
*** TODO ciao icon in mac and linux
    (which calls ciao-startup)
*** TODO ciao-startup should do a different thing the first time that it starts
    (how to do it? save customization var? clean after each reinstallation?)
*** Archive							    :ARCHIVE:

**** DONE M-x ciao and M-x ciaopp should not delete other windows
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-21 Tue 18:23
     :END:
     I want to use them to switch to those process buffers like I do
     with M-x shell.

     Those commands should also NOT print "Starting...", specially since
     most of the time the process has already begun.

**** DONE ciao-ensure-inferior-process just switches to the buffer
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-21 Tue 19:16
     :END: 
     if the process is running (does override the mode, etc.)
**** DONE showing the 'starting Ciao toplevel...' and 'done' when
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-21 Tue 19:16
     :END:
     the process is really started (the same with ciaopp)
**** DONE fix bug that inserted the ciao logo several times
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-21 Tue 19:16
     :END:
          (C-x l, M-x ciao, C-x l)
**** DONE M-x ciao and M-x ciaopp are aliases for run-ciao-toplevel and run-ciao-preprocessor
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-21 Tue 19:16
     :END:
     They do not handle the windows in a different way now.
**** DONE refactoring code to start inferior processes
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-21 Tue 19:34
     :END:
     Renamed
     ciao-ensure-inferior-process -> ciao-start-inferior-process

     New ciao-ensure-inferior-process: really does nothing if the
     inferior process already exists. Factorizes code to insert logos
     and show "Starting..." messages.

**** DONE Fix ciao-check-buffer-syntax
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-21 Tue 19:34
     :END:
     It locates the errors now like any other compilation command.
** TODO [#B] Tasks and ideas
*** Mimick (some) keybindings from compilation mode?
    [[http://www.gnu.org/software/emacs/manual/html_node/emacs/Compilation-Mode.html]]
*** Fly-compile?
*** Does main_module prolog_flag exist?
    : (concat "set_prolog_flag(main_module,\'" ciao-main-filename "\').") t))
*** TODO Draw a SVG image with the dependencies (for documentation)
*** TODO Allow /disabling on the fly/ of mode features? (e.g. turn-off-indentation)
*** TODO Debugger and emacs-mode
**** TODO Implement a low-level debugger for WAM instructions		 :JF:
     I need an engine with low-level instructions to do listings and
     stepwise execution. At each step, the engine shows useful events
     and waits for commands. The emacs mode can interact with it in a
     nice way.

     Even simpler implementation:
       - show events like 'executed predicate' and bytecode offset in the clause
       - disassemble the module (e.g., ciaodump)
       - do something quite similar to a normal debugging session
     
*** TODO LPdoc and emacs-mode
**** TODO Have a look at org-texinfo export
**** TODO Use ciao-widgets.el to customize SETTINGS.pl
     That is, an LPdoc option browser (with help).
     Advantage: it may be simpler than looking in the manual.
**** TODO Redesign LPdoc menu entries

     Distinguish between temporal buffer documentation and
     bundle/application documentation. This is a proposal:

     - "Generate documentation": locate a SETTINGS.pl in the sources
       and (re)generate the documentation.

     - "Visit SETTINGS.pl": locate a SETTINGS.pl in the sources and
       visit it.
       
     - "Generate documentation for buffer": locate a temporal
       SETTINGS.pl just for the buffer (or generate it if it was not
       available: pick options from SETTINGS_DEFAULT.pl or from the
       SETTINGS.pl in the sources). Probably, we want to customize that
       file interactively at this point. Then, generate the
       documentation.
       
     - "Visit SETTINGS.pl file for buffer": visit the temporal
       SETTINGS.pl.
       
    And in a similar way for "View documentation".

**** How to locate SETTINGS.pl in the souces

     Proposal: like in Git, look in the parent directory a SETTINGS.pl
     or doc/SETTINGS.pl file. An error is raised if it is not found.

     Reuse that for location of Manifest.pl files, and use it also to
     store the analysis options, etc. in CiaoPP.

*** TODO Bundles and emacs-mode
**** TODO Extend main file menu entries for a Manifest.pl
     Currently it only works for CiaoPP, by setting some prolog flag!
**** TODO Use ciao-widgets.el to customize Manifest.pl
     That is, a bundle editor?
     (Also for the rest of options of the system)
**** TODO Mimick SETTINGS.pl location for Manifest.pl
     That defines our projects!
*** TODO Decide a new distribution of menus?				 :JF:
*** TODO Bug support for LPdoc
*** TODO Allow switch to buffer look in other frames?

   Here is some useful code (incomplete):
: (let* ((b (get-buffer "*Ciao*"))
:        (w (get-buffer-window b t))
:        (f (window-frame w)))
:   (select-frame-set-input-focus f)
:   (select-window w)
:   (set-buffer b))

**** export to org-mode?
**** export to taskjuggler?
** TODO Bugs
*** TODO Fix font-lock
    See other modes, we do not use many of the modern features (see
    ciao-font-lock-defaults-create and
    ciao-inferior-font-lock-defaults-create).
*** TODO broken windows installation					 :JF:

    In a Windows machine (with no installed Cygwin), do/2 seems to
    halt. Also, batch calls to emacs does not admit "'" to quote
    strings from the Windows shell. It may, or noy be, related with
    this.
**** TODO Define ensure-single-inferior-process and send-simple-command?
     Each command will start again with its own status. This may solve
     the issues with Windows shells.

*** TODO check uninstallation script for windows (CiaoDE.iss.skel)	 :JF:
    It would be better if we do not need to specify all files.
*** TODO Use info-look.el instead of word-help.el			 :JF:
    
    Replace our documentation about word-help by a description of the
    /standard key bindings/, e.g. C-h S, M-TAB, M-/ (that one is really
    magic...).

    Describe problem of Mac (and Win) with M-TAB (it is another thing
    by default). Find a solution?

*** TODO Add a button for running tests					 :JF:
    Do not reuse the one for assertions.
*** TODO [#A] Do not use C-c commands in the emacs mode			 :JF:

    C-c is reserved for user extensions. It is a radical change but
    necessary.

*** TODO Own manual for emacs-mode
    Make sure that:
     - (existing?) references between manuals work
     - word-help (or equivalent) work
       
    That will make emacs-mode a separate bundle.
*** TODO [#C] autoload and defgroups
    I've seen few elisp code using autoload for defgroups. Should we
    add them? If not, it is not possible to customize Ciao if the
    ciao.el files has not been loaded.
*** Archive							    :ARCHIVE:
**** DONE Do not generate link to prolog.el				 :JF:
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-03 Fri 10:51
     :END:
**** DONE Simplify =ciao-goto-...=					 :JF:
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-03 Fri 10:51
     :END:
     Remove ciao-goto-ciaosys-manual, etc.
     Keep only ciao-goto-manuals.
**** DONE Rename "Ciao/CiaoPP/LPdoc Listener" mode name			 :JF:
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-03 Fri 10:51
     :END:
     Use just "Ciao Listener".
**** DONE Fix custom mode name bug					 :JF:
     :PROPERTIES:
     :ARCHIVE_TIME: 2012-08-03 Fri 10:51
     :END:
     Customization of buffer names is not really a problem, but buffer
     names and mode names are different things. Make sure that the code
     makes that distinction (also for word-help or info-look).
** TODO Older bugs and tasks (revise)
*** prompt is not orange in emacs-22?

 --> this is because comint-highlight-prompt does not exist in emacs-22 :-(
@include{README_CIAOPP.lpdoc}
was Systems/ciaopp/doc but ciaopp is now 1.0 and does not have
(yet) a README.lpdoc file

The values in the automatically generated lpdoc SETTINGS file must
be configurable.
- It seems that a module-qualified goal in a predicate is not correctly
  marked in source debugging, the previous line is marked instead.
- When an empty .pl file is opened, add module declaration etc.
Preprocess with options should take you to the other buffer.
When an empty .pl file is visited an empty module declaration is
added and perhaps even version control.
The same way as with versions, files could have an indication of
where the 'project' file is (with the main, etc.)

*** add button for seeing output
*** xemacs tool bar
*** local doc generator has to be rebuilt (it is broken right now)
*** inferior should not be visible? (too advanced for now...)
*** Inferior mode 'Ciao' menu should change depending on whether it is LPdoc or CiaoPP, or ...
*** Tool bar has a button so that one can be in preprocess, debug, help, etc. mode, and the toolbar changes
*** really test on macs and windows, older versions, etc.
*** debugger does not work on files with .pls ending?
*** Frame titles: / In any case title should be 'Ciao'
   default:

: (setq (multiple-frames "%b" ("" invocation-name "@" system-name)))

   ideas:

: (setq frame-title-format (concat "Ciao: " "%b"))
: (setq frame-title-format "%b")

*** Coloring:
   
   %-type comments after a use_module declaration.

   When the first argument of a predicate is a quoted atom, the open
   parenthesis is also colored red:
   
   : separator('(' , _, '') :- !.

   On these (which again do not work), see comments by DTM below.
   incorrectly_colored('Atom ending in 0').

: trans_info(eapp026, 'Webmergers 120').
: trans_info(eapp030, 'QSP''s ASP business').
: trans_info(tech055, 'AiSoftw@re SpA').
: trans_info(eser002, 'ISP Europeo, la participacion del 49,5 % poseida').
 
   I think that at least the two first can (and should) be easily
   corrected.

   Should also color variables, etc. in top level?

*** On Mac:
    Ciao requires the definition of some shell environment variables
    through the DOTcshrc or DOTprofile.  If correctly configured, when
    emacs is launched from a terminal all works fine, but not when you
    load emacs from the desktop icon (or dockbar, finder, etc.). It seems
    that these applications doesn't load any profile file (in a standard
    way).

    A workaround may be starting emacs from a terminal (ensuring that Ciao
    works in a terminal) in this way:

    : $ open /Applications/Emacs.app

    - We could see if there is a way to load the user's profile file from
      the .emacs file.
    - We should in any case document it in the manual.

*** Define a 'novice' or 'ciao environment' variable.

    When on, menus are very simple and only talk about Ciao (nothing on
    emacs).  In any case, menus should be divided into not Ciao or
    CiaoPP, but rather in other classes, e.g., help, debug, compile,
    precompile, document, version control, config, gui builder, etc.
      
    : emacs -q -l /home/clip/lib/ciao/ciao-mode-init -f ciao-startup

*** Generate task lists from the bug lists of distributions? (Paco)
*** Have a good bug reporting mechanism
*** Eliminate a changelog entry
*** Need to fix better the deleted buffer problem

    Missing buttons in toolbar for new emacs versions??

:   '(font-latex-match-font-outside-braces		      ;;;\textit{text}
:     (0 font-lock-keyword-face
:        append                         ;Override? [t 'keep 'prepend 'append]
:        ;; Can't use prepend because that overwrites syntax fontification
:        ;; e.g. comments.
:        t)                              ;Laxmatch? if t, do not signal error
:     (1 font-latex-italic-face append t)
:     (2 font-latex-bold-face append t)
:     (3 font-lock-type-face append t))

*** Remember to keep track of which version of emacs we are working with
*** C-u <compilation command> asks for options
    Remembers them per buffer (or set them through a menu)?

** TODO Revise, probably duplicated or outdated
*** TODO [#D] Fix emacs mode (documentation, etc.)
    Fix ciao.el.body! Test menu / coloring of This is the 3rd question:
*** flymake.el org-mode ibuff (require 'printing) ruler-mode
    ses-mode table.el tumme.el (images, C-t d in dired)
    Windows can now have their own individual scroll-bar settings
    (redisplay t) forces an immediate redisplay even if input is pending.
*** The new library button.el implements simple and fast `clickable
    buttons' in emacs buffers.  Buttons are much lighter-weight than
    the `widgets' implemented by widget.el, and can be used by lisp
    code that doesn't require the full power of widgets.  Emacs uses
    buttons for such things as help and apropos buffers.
*** The new library tree-widget.el provides a widget to display a set
    of hierarchical data as an outline.  For example, the tree-widget
    is well suited to display a hierarchy of directories and files.
*** Use outline-minor-mode to hide/show definitions.
*** TODO [#C] Should look like true environment when coming up		 :MH:
*** Xemacs stuff: 
**** TODO [#C] xemacs tool bar not used yet				 :MH:
**** TODO [#C] Make colors and images work in xemacs			 :MH:
**** TODO [#C] Fix the incompatibilities with xemacs that exist now (location of :MH:
                    manuals, help, source debugging, etc.) 
**** TODO [#C] Fully check xemacs (and emacs?) on MacOS!		 :MH:
**** TODO [#C] Fully check xemacs (and emacs?) on Windows!		 :MH:
*** TODO [#C] Automatic elimination of an entry in the changelog	 :MH:
*** TODO [#C] Make colors (faces) be conceptual and customizable	 :MH:
*** TODO [#C] Make customizable faces be included automatically in manual :MH:
*** TODO [#C] Put icons in a separate dir				 :MH:
*** TODO [#C] Fix problems with correct coloring of literal-level assertions :MH:
*** TODO [#C] Coloring spanning several lines				 :MH:
*** TODO [#C] Easy access to recoloring					 :MH:
*** TODO [#C] Make list of user defined directives cutomizable (for coloring) :MH:
*** TODO [#C] Syntax errors not correctly colored			 :MH:
*** TODO [#C] Error mark should be accessed and cleared automatically when generating documentation. :MH:
*** TODO [#C] Fix problems locating errors				 :MH:
*** TODO [#C] Make colors work in ascii mode				 :MH:
*** TODO [#C] Improve icons						 :MH:
*** TODO [#C] Move to symbol-help-mode (C-h TAB) rather than the obsolete word help we use now (see javahelp.el 2.0?) :MH:
*** TODO [#C] When source debugging a file, emacs gets sometimes confused due to the /cygdrive/c thing. :MH:
*** TODO [#C] Call the emacs mode the programming environment in manuals, change name of section "Using Ciao Inside GNU Emacs" :MH:
*** TODO [#C] Get rid of compilation warnings				 :MH:
*** TODO [#C] Make preprocessor and lpdoc icons and menus be optional	 :MH:
*** TODO [#C] Make emacs mode for .pl files be optional (some of these perhaps in customize?) :MH:
    (see also cin Ciao list: associations for .pl) 
*** TODO [#C] Assertions library (:- doc) (and change reference to assertion language) :MH:
*** TODO [#C] Buffer sentinel: selecting deleted buffer? 		 :MH:
*** TODO [#C] convert-texinfo.el in ciao/emacs should probably go to the lpdoc library? (as well as be included in the emacs mode?) :MH:
*** TODO [#C] Comment region						 :MH:
*** TODO [#C] Graphical interface to ciaopp (you can select text or graphics) using emacs-21 facilities. Generate graphs, etc. :MH:
*** TODO [#C] project-am.el, a project mode for emacs (useful?)		 :MH:
*** TODO [#C] \, put in by the ^c-l command Windows, Xemacs 21.4.	 :MH:
#+begin_example
   ?- ensure_loaded('C:\ciao-1.8p2Win32\tmp\test.pl').
   {ERROR: ... file C:iao-1.8p2Win32 mp est.pl not found} 
#+end_example

*** Archive							    :ARCHIVE:
**** DONE [#C] Assertions for software testing, (test input/outputs) :MH: 
     CLOSED: [2010-01-08 Fri 10:26]
     :PROPERTIES:
     :ARCHIVE_TIME: 2010-01-08 Fri 10:26
     :END:

** FUTURE Future work
*** On the fly compilation / cheking -- flymake.el?
*** Projects
**** Projects have a 'code style' file
     (which controls tabbing, and other style things)
*** Shrink and expand method definitions.
    Button on the left margin to do it. 
*** Fill in automatically comment headers.
    Look at the closest method and take pred name, args, types,
    etc. from there.
*** you can get a list of TODO: comments in the code hitting F6
    (they appear attached to a tree of the source code)
*** Refactoring
**** Mark errors and warnings automatically

     - Mark (parsing) errors automatically (in red).

     - Mark candidates for refactoring (in yellow), with suggestions on
       what to do (e.g., 'this variable is unused').
     
     - Do it incrementally (do it by running the compiler periodically
       in the background).
     
**** Find automatically (almost-)duplicated code. 
**** If you change a method or variable name it is changed in every place.
**** Look at refactoring stuff for Java: safe_delete, etc. 

* Ciao
** TODO [#A] The meaning of the pure package needs to be revisited. 
** TODO [#A] Things like :- dynamic or :- concurrent are loaded by default even if :- module(_,_,[]). (this is an error).  
** TODO [#A] Ciao ISO multithreading 
** TODO [#E] Finish Webchat demo in Ciao.			      :MH:PB:
** TODO [#C] Unify download script data files into new ones to have a complete historical record. 
** TODO [#C] Improve download script? (generate reports with charts library: or see WebDB statistics) 
** TODO [#C] Setup a bug tracking tool (with bug numbers/dates/etc.) 
** TODO [#C] Improve regular expressions lib (see FSA http://www.let.rug.nl/~vannoord/fsa/fsa.html) 
** TODO [#C] Add CLIP/Ciao entries in EAPLS pages 
** TODO [#C] Announce/Update in: http://archive.comlab.ox.ac.uk/logic-prog.html 
** TODO [#C] Produce new Ciao brochures (color?) (using GIMP, etc.). Features! 
** TODO [#C] Put VIFID in public place, CHANGE MANUAL SUBTITLE! 
** TODO [#B] Maintain Ciao brochure. 
** Cosytec Things:
   - Feature terms:
     X @ new is X @ old + y @ foo
    - Format of the output
    - Widening
** Semantic web library (see SWI).
** Is this the ISO behaviour? (seems like it should produce an
  error...)
  # ?- functor(A,B,C).
  # 
  # no
** Check that no :- syntax declarations are left.
** Assertions in builtins should be changed to true (or trust) (?)
** Change many props in engine builtins to types
** How does =impl_defined= interact with the debugger? 
   I.e., are bridge predicates needed as for some of the built-ins?
** Library for translating XDR to XPATH
** Database interface
** Improve PiLLoW
** TODO [#C] Improve Java interface. High-level objects.
** Improve C interface (construct Prolog terms in C)
** TODO [#C] Other missing documentation: FAQ, Ciao for Prolog Programmers,
   complete reference manual. User's manual? 
** TODO [#C] General improvement of reference manual (See SICStus and
   other Manuals for missing parts, process old SICStus manuals) 
** TODO [#C] Have a much better set of examples (also for
   documentation). 
** TODO [#C] Documentation style guide: how to document using
   lpdoc+assrt+basic props
** TODO [#C] Add more references in manuals to all the new papers (on
   ciaoc, modules, etc.). E.g., in intro: make a special section on it. 
** TODO [#C] Predicate abstractions need to be documented, examples
   included. 
** TODO [#C] Explain better how to develop a multithreaded socket/web
   server with Ciao. Perhaps give an already programmed basic building
   block. 
** TODO [#C] Explain better how to develop in Linux and run in Windows,
   etc.  
** TODO [#C] Think about getting listed in the Language Links section of
   Linux Weekly News 
** TODO [#C] Complete Ciao sources documentation, try to use CiaoPP to
   catch errors
** TODO [#C] Ciao HOW-TOs? (small and targeting specific issues) 
** TODO [#C] Port misc. updates to main Ciao tutorial slides
** TODO [#C] higher order in manual 
** TODO [A] make sure relevant examples end up in the manual 
** TODO [#C] differences between running debugged and compiled code in
   manual 
** TODO [A] pay attention to lpdoc warnings! (even if it finishes) 
** TODO [#C] divide manual into bigger sections/volumes 
** TODO [#C] put the tutorial in the chapter "A beginners overview of
   Ciao" 
** TODO [#C] Ciao for Prolog programmers 
** TODO [#C] say that all we want in return are references in papers, web
   pages, etc  
** TODO [#C] Have a good set of examples. 
** Calling from C to linked Ciao 
** .asr generation
** Convert C error messages into exceptions  
** better documentation of side effects
** WebDB?
** TODO [#C] predicate_property should be ISO compatible (see messages) :MC:JF:
** TODO [A] Make .h files to be installed in a standard place.		 :JF:
   This should already be done! $INCLUDEROOT/ciao_prolog.h
   should be a link to the place where it is actually placed. 
** TODO [#C] Install C include files in a standard locations (or, at
   least, a link to where the include files are stored)
** TODO [#C] Make the compiler generate glue code for a .pl interface file :JF:
  whithout having to generate a fake main file. [This somehow breaks
  the idea of how the compiler works.  Maybe it can be implemented by
  having an additional compiler option that traverses the module
  dependencies as if it were compiling an application, but without the
  need of having a main/0 predicate.] 
** TODO [#C] Incorporate a way to allow a C function to return a failure. :JF:
** TODO [#C] Clarify how a predicate written as a C function can fail 
** TODO [#C] Change name of foreign_interface to c_language_interface (and
   similarly for the rest of interfaces) 
** TODO [#C] Incorporate macros to throw standard exceptions easily.	 :JF:
** TODO [#C] Add SICStus-style toplevel_print_options flag 
** TODO [#C] Illustrate calling Prolog from C, improve interface, make examples visible, write in manual :JF:
** TODO [#C] Improve & generalize database interface (types, automatic
        table creation, interface to more databases) 
** TODO [#C] Make buitins throw exceptions as dictated by ISO-Prolog :MC:JF:DC:
        [note: I (boris) have files which implement this, not in all
        the cases, for a 1.6 distro, but couldn't yet integrate them
        in the current distribution; does anyone volunteer?] 
** TODO [#C] Work out type equivalences between Prolog and different
             databases; include always the SQL standard, with possible derivations
             for different DB implementations.  Make sure it is bidirectional. 
** TODO [#C] Move fully to lpmake/Ciao.  
** TODO [#C] Make exceptions behave correctly (or, at lest, without
        breaking the whole thing) with threads 
** TODO [#C] Libs should not print error messages, raise exceptions
         instead 
** TODO [#C] Finite domains
** TODO [#C] Major engine cleanup for modularity, and speed it up (see
  yap). Stack protection via memory management when possible (mprotect
  may or may not be available in cygwin...see Mercury list). Stack
  realloc using mmu. Make all parts of the engine that are not actual
  instructions be modular (and included in executables only if needed
  to have a really tiny footprint). 
** TODO [#C] Have a good set of performance benchmarks, keep track of performace
             wrt to other Prologs, gcc, Java, etc. Raw speed, compilation speed,
             database access speed, file access speed, memory use and management,
             etc.  and check periodically. 
** TODO [#C] Follow the development of other systems: SWI, B-Prolog, YAP,
   SICStus, GNU Prolog, Mercury, Curry, Oz, Bart's stuff, Squeak 
** TODO [A] Try out other systems and keep comparisons of speed and
  features. Automate performance benchmarks (grab from Eclipse?). 
  Directory with benchmarks and test periodically 
  * speed 
  * databse access
  * memory management
** TODO [#C] Need to do some serious benchmarking and announce
  results. See
  http://www.cs.mu.oz.au/research/mercury/information/benchmarks.html
  and the new SICStus pages 
** TODO [#C] Integrate C compilation with rest of system 
** TODO [#C] Improve indexing in Prolog to C compilation		 :JF:
** TODO [#C] Reduce executable size in Prolog to C compilation		 :JF:
** TODO [#C] Recover all Ciao characteristics when compiling to C	 :JF:
** TODO [#C] Make changes to emulator easy to inject in the compilation to C 
** TODO [#C] Compile for ARM (e.g., iPaq)? 
** TODO [#C] Decide on license issue (GPL/LGPL/...); look at
         opencontent.org/openpub; several messages in Ciao-License.
         Also PENDING_CIAO 
** TODO [#C] Make Ciao a listed GNU package 
** TODO [#C] Re-check installation in partitions other than C. Create an e.g. 
        G partition in one of the windows machines. 
** TODO [#C] Generate rpm/srpm(debian) for other distributions
   That is:
   - RH, .deb, emerge/portege for Gentoo, whatever is used in FreeBSD
     (same process as Windows?). Simplify installation.
** TODO [A] Keep documentation up to date! 
** TODO [A] Hilight pointer to javadoc documentation in manual 
** TODO [#C] See if addmodule should replace args instead of adding them? :DC:
** TODO [#C] Automatic insertion of impl_defined?		      :MC:JF:
** TODO [#C] Move many unfinished things to contrib for now. Design & implement a Global Ciao Library (a la MOGUL) http://www.mozart-oz.org/mogul/ 
** TODO [A] Make sure Ciao is included in all the relevant lists (LogTalk, agents, compilers...) 
** TODO [#C] Unary operators for CLP({Q,R,FD}): fib(.=. 0, .=. 0). Unary operators for CLP({Q,R,FD}): fib(.=. 0, .=. 0).
** TODO [#C] autoconf/automake for C part? autoconf/automake for C part? (not really needed?)
** TODO [#C] Implement dump (export only?) in CLP(Q/R) (requested by John
  Gallagher). Strengthen CLP(Q,R), make them more usable. Perhaps just export clpr/clp_dump:dump/3?  
** TODO [#C] Reification in CLP 
** TODO [#C] %% Needed because of bug in embedded debugger -> FIX	 :MH:
#+begin_example
  :- use_module(library(debugger), [debug_trace/1]). 
#+end_example
** TODO [#C] Entry in Agent software listings in
  http://www.agentlink.org/resources/agent-software.html 
** TODO [#C] ?- use_module(library(c)).  Note: module c already in
executable, just made visible Must get rid of it (c_interface is an
option) ?- use_module(library(c)).  
** TODO [#C] Rethink 'module already loaded...' message 
** TODO [#C] Installation permissions: should set group also! 
** TODO [#C] Unify types (and assertions) in foreign interface w/normal
        assertions. Also foreign vs. implementation_defined, etc. 
** TODO [#C] Install Ciao icon on desktop (and manuals?) and entries for
  environment and manuals in "start" menus (for Windows/gnome/kde).
  When clicking on source a file, it opens in the environment.
  Right-clicking gives the option to open it in emacs
  (the environment) or, optionally, a user-selectable editor. 
** TODO [#C] emacs (and, possibly, tcltk) distributed with installation? 
** TODO [#C] Direct link to emacs in Web page, possibly distribute emacs with Ciao 
** TODO [#C] Make it possible to work on the Windows version of the engine
   remotely from a Linux terminal. Also, be able to recompile the engine
   for windows automatically as part of the standard process of
   generating binary distributions. 
** TODO [#C] Post examples of code for features on web site (perhaps slides OK). 
** TODO [#C] Improve Ciao tutorial. 
** TODO [#C] The functionality of compiler_output should really be in ciaoc. 
** TODO [#C] Add multiattributes (multiple attributes per variable) 
** TODO [#C] Attributed variables: better handling of cut 
** TODO [#C] Add hook in attributed variables to react to garbage
        collection; also useful for object GC 
** TODO [#C] Modification of attribute vars: should be called in GC
             marking phase, to say which other variables are linked. etc. 
** TODO [#C] Go over connections library (SOAP, HTTP, FIPA, etc.). Make
   sure what we want. 
** TODO [#C] Improve objects, make them robust, simplify 
** TODO [#C] Make objects use inheritance from module system; change this
   one, if needed 
** TODO [#C] Implement distributed objects, refine algorithms and prove
        correct, evaluate performance 
** TODO [#C] Fix distributed, active, mobile objects
** TODO [#C] Make instance_of to be easy to analyze Make instance_of to be easy to analyze
** TODO [#C] Port the FSA utilities to Ciao  
** TODO [#C] Make delete_files/1 delete symbolic links (e.g.,
   delete_files(~ls('*_co.pl|*_opt.pl|*~|*.asr|*.mpp|*.itf|*.po'))) 
** TODO [#D] Make Ciao run on Alpha Linux machines? (we have one,
   onan.ls.fi.upm.es) 
** TODO [#C] Generalize I/O library to write to/read to Prolog strings as
   well as to streams (possibly connecting strings and streams with
   open_string(Stream, String?)
** TODO [#C] display_list and display_string should have extra stream argument. 
** TODO [#C] Use & generate shared objects .dll in Windows. Perhaps switch
       to libtool --- useful for generating shared objects everywhere 
** TODO [#C] Parse by column number. Store columns of goals? 
** TODO [#C] statistics(runtime,X) does not appear to work on Win32? 
** TODO [#C] Recheck shell/1, shell/0, popen, etc. on all platforms
** TODO [#A] Implement timeouts 
** TODO [#C] Implement disjunctive wait on concurrent predicates
** TODO [#C] Try to get Ciao included in official distributions 
** TODO [#C] Visual basic interface? (see SICStus) 
** TODO [#C] .po cleanup: reconsider representation and architecture, .po
             architecture-independent 
** TODO [#C] Automatic uninstallation in Windows also (now only Unix) 
** TODO [#C] Clicking on install.bat still leaves a stupid dos install.PIF
             garbage file? 
** TODO [#C] be able to specify a given preprocessor that a file must go
             through before going into the compiler (?) 
** TODO [#C] Ciao on .NET?
** TODO [#C] GRID interface? 
** TODO [#C] Garbage collect atoms --- be careful with interaction with
        threads; think about its interaction with object GC 
** TODO [#C] Project builder? 
** TODO [#C] Interface builder? 
** TODO [#C] Make specialization of instructions optional (have a faster
        and a slower abstract machine, but with smaller and fewer
        instructions) 
** TODO [#C] Add and-parallelism at low level 
** TODO [#C] Add or-parallelism at low level 
** TODO [#C] Create special kind of concurrent facts where no retract is
        permitted (monotonic). Interesting because they are logical. 
** TODO [#C] Create special kind of concurrent facts that have an event
        property: they have hidden timestamp args (Sergio's idea) 
** TODO [#C] Unify the names of misc. builtins (with SICStus?). E.g.,
        host_name/1 vs. current_host/1, sleep/1 vs.  pause/1, pid/1 vs.
        get_pid/1. 
** TODO [#C] Try cross-compilation using Mingw (see messages on Mercury list). 
** TODO [#C] Encryption library / Secure sockets layer			 :PL:
** TODO [#A] Sort expansions using precedences, like with the ops	 :RH:
** TODO [#C] Look at Mercury's pragmas for large fact databases 
** TODO [#C] Package names: discussion on .ph against .pl. Better, avoid packages and merge them with modules? 
** TODO [#C] Make sure we import lists only if we are using the
             assertions, right? Lists uses hiord! 
** TODO [#C] Have a look at Qtk and Gtk bindings in OZ, which seem to work on windows, linux and MacOsX 
** TODO [#C] Adapt persdb to file locks, unify persdb versions 
** TODO [#C] Improve/clean up DB interface (e.g., should raise exceptions). SQL.  See sql.el
             http://www.geocities.com/TimesSquare/6120/emacs.html 
** TODO [#C] Remove modes +, -, etc. from basicmodes (?)
** TODO [#C] Perl interface? See http://search.cpan.org/author/SALVA/ 
** TODO [#C] Move to a hierarchical module system? Should not be too dificult, makig the 'module name' be the 'path' 
** TODO [#C] Make sure Ciao can autoconfigure, compile and run in 64-bit architectures 
** TODO [#C] look at the "tree" data structure of GCC as the way to
             interface the Prolog compilation with the C compiler internals; take
             inspiration from the Mercury backend 
** TODO [#C] ISO compatibility for builtins --- perhaps provide a
             iso-strict mode, even if it is (for now) much slower? 
** TODO [#C] How can the first token of the module (e.g., :-
             module(cosa,[pepe/1,luis/2],[myexp]).) be expanded? 
** TODO [#C] Use Java library for demos w/sound, 3d! 
** TODO [#C] SICStus' charIO? 
** TODO [#C] Look at BlueJ (programming environment)
             http://www.bluej.org/why/why.html#introduction
** TODO [#C] add nonground/1 to engine/term_typing.pl? 
** TODO [#C] Remember to announce periodically new versions in ALP newsletter, etc. 
** TODO [#C] Global variables 
** TODO [#C] Executables in Windows (-S). Document current solution. 
** TODO [#C] make concurrency-related features be active only when
             concurrency is loaded; this should be a general design
             guideline (?)
** TODO [#C] Getting sources to compile under windows 
** TODO [#C] Building executables where the main program is in C (by
             outputting bytecode to .c files as arrays or by really translating to C).  
** TODO [#C] Facts where updating a field is cheap 
** TODO [#C] Ciao as gnumeric/excel plug-in (rules, constraints, ... !). 
** TODO [#C] User library, where they can add things by themselves (?)
** TODO [#C] Option so that .po, .itf, etc. files go in a pool directory (a common directory which is different from where the .pl is) 
** TODO [#C] In the top level there could be a way to 'go into' a module :DC:
             I.e., you say 'enter module m' and it is like going
             inside module m and being able to call the internal
             predicates of module m, even if they are not
             exported. Very useful for debugging and eliminates the
             need for call_in_module/2. In some ways it is easy to
             implement with call_in_module/2: 'moving into a module'
             basically sets a default for call_in_module/2, and the
             query in the prompt is called using call_in_module/2.
** TODO [#C] Have a good set of error detection benchmarks (one for each
             bug detected previously) to make sure they do not appear again. 
** TODO [#C] Corba interface? (check out GNU CORBA implementation gnorba) 
** TODO [#C] http etc procedure call interface?
** TODO [#C] .err files are not created with the right permissions!!! 
** TODO [#C] Fix remote and &-Prolog libraries, etc. (at least say they are experimental) 
** TODO [#C] Bring in &-Prolog parallelism code 
** TODO [#C] ciao-shell should call main/0 if main/1 does not exist. 
** TODO [#C] library module browser 
** TODO [#C] Multiarg indexing (see
             ftp://ftp.rahul.net/pub/tom/ftp/indexer.tar.gz) 
** TODO [#C] .pl associations should be optional ( Perl :-( ), also some
             mode aspects 
** TODO [#C] errors in format cause it to fail? (but in SICStus it
             aborts...?) 
** TODO [#C] CHR  
** TODO [#C] Contractions as dual of Expansions? Interface to debugger?
** TODO [#C] JAR libraries (as in Java)
** TODO [#C] Libs: passwd, pgp, pillow (fix errors), java intf, tcl-tk
             intf, patt match 
** TODO [#C] 'ciao-shell' should have a link 'prolog-shell'
** TODO [#C] Check the comments in tcltk (specially objects: they do not
             read). And examples. 
** TODO [#C] Fix/extend format/2, format/3: print with fixed number of
             digits, TABS 
** TODO [#C] true/1 should be absorbed by compiler?, but should be
             redefinable? 
** TODO [#C] Fix:
  > :- comment(appendix,"Currently, the following builtin predicates/program
  > 	constructs cannot be redefined, in addition to @tt{true/0}:
  >         @tt{(->)/2} @tt{(,)/2} @tt{(+)/1} @tt{if/3}". 
** TODO [#C] add readline interface to CIAO? 
** TODO [#C] clean up .development libraries (see Paco's messages) 
** TODO [#C] Improve .asr (and .po, .itf, ...) elimination script (?)
** TODO [#C] delete_file should throw an exception (but we can try with
             file_exists first...).  
** TODO [#C] GENERAL IMPROVEMENT TO MANUAL 
** TODO [#C] See list of comment(bug, entries inside lpdoc files 
** TODO [#C] Just in time compilation? 
** TODO [#C] Install
             ciao-0.7/ciao-0.8/ciao-0.9/ciao-1.0/ciao-1.1/ciao-1.3/ciao-1.4/ciao-1.5 
** TODO [#C] Improve behaviour of ~ in findall (at least document)
** TODO [#C] Get make lib/lpmake to work again, update, delete ~/lpmake?
  lpmake fixed in library! (io_aux is builtin?!?!?)
  dependency_precond/3 issue, lpmake should return to etc.? new
  fileinfo.pl (modified it to adapt to c_itf, comments)  
** TODO [#C] Remove 'main.' facts (which mess up the documentation!)
  (problem was import not documented?) 
** TODO [#C] ExtensionS = [0'.|TSuffixS], not expanded properly in debugger
  This works:
  Temp = 0'. ,
** TODO [#C] Implement a 'find' in Prolog (see find-lisp.el)
** TODO [#C] Include Minerva examples (look in PROLOGCOURSE)
  (part left by Manolo in /home/clip/Systems/Minerva)
  see $MINERVA_HOME/ExamplePrograms (Eliza, etc.) 
** TODO [#C] Recode Curry examples in CIAO:
  (http://www-i2.informatik.rwth-aachen.de/~hanus/curry/) 
** TODO [#C] Port constraint visualizers to Ciao? 
** TODO [#C] Document in utils.pl : ciao_get_arch 
** TODO [#C] Make available slides for "Some strengths and Weaknesses of (constraint) Logic Programming Sytems for Agent Based Applications" :MH:
** TODO [#C] Add a 'deprecated' assertion which states what call should be
   used instead --- better if the warning is generated automatically when
   compiling and in the documentation: :- deprecated no_path_file_name/2
   + use(file_name_path/3).  Same for whole modules? 
** TODO [#C] Import exceptions from another (handle-coordinated) thread: in
   G &> H, ...., <& H, if G raises an exception, the calling thread
   receives it when doing <& H 
** TODO [#C] Encapsulate particular BD as objects: DaletDB new
   sql_db(dalet,id,Passwd), 
** TODO [#C] Complete pattern-matching library (there are opinions on this) 
** TODO [#C] Make function syntax and modules work together:		 :DC:
#+begin_example
   foo(X) :- mod:bar(X). and foo := ~mod:bar. 
#+end_example
** TODO [#C] Make ciaoc (or c_itf) lock the files being processed, to
   allow concurrent accesses; needs file locks. 
** TODO [#C] -h / --help switch in all Ciao executables (ciaoc, etc.)
** TODO [#C] Make ^ mean "type abstractions", to use them on-site
   instead of adding a new predicate for the desired type 
** TODO [#C] ^ (escape character) and types defined using meta-predicates ^ (escape character) and types defined using meta-predicates
** TODO [#C] when file F imports from module A, which reexports from
   another module B, if B is accessed in A with a relative path (e.g., :-
   reexport(module_b, [foo/3]). or :- reexport('dir/module_b', [foo/3]).)
   if file F is not in the same directory as A, the compiler does not
   find B (since it searches for it in the current directory) 
** TODO [#C] modules which do not export predicates (e.g., they only
   define multifiles) are not taken into account when finding
   dependencies 
** TODO [#C] make the ciao instalation leave configuration files in
   /etc/profile.d (or similar) in systems which have it (it saves
  per-user configuration) 
** TODO [#C] try complex applications (e.g., ciaopp) in windows & Mac OS
   X, make sure they work 
** TODO [#C] Think again on the relationship between concurrency (a la
   Ciao) and tabling (there is a discussion on this) 
** TODO [#C] list of elements of type T as [T]?
** TODO [#C] relative_file_name/3
** TODO [#C] Continue assessing ISO conformance; keep a testbed so that we
   are sure we do not break anything 
** TODO [#C] thread-private database?  This would automatically provide
   findall/3, and also ease implementing a correct catch/throw 
** TODO [#C] exfix operators: :- op(1024, fxf, <, > ). makes < a > be
   read as '<>'(a) 
** TODO [#C] make sure any makefile uses "cd AlgunSitio && $(MAKE) AlgunObjetivo" instead of "cd AlgunSitio; $(MAKE) AlgunObjetivo" 
** TODO [#C] make the odbc mediator available somewhere 
** TODO [#C] make all database interfaces look the same; maybe have
   only a persistent_sql package and specify the type of db with, e.g.,
   an assertion or a fact 
** TODO [#C] make ciao abide by the external API of xalan
   (http://xml.apache.org/xalan/) 
** TODO [#C] sup/2 / maximize/2 / inf/2 / minimize/2 in CLP 
** TODO [#C] current_stream should not enumerate on backtracking streams
   which where open prior to calling it, and closed after caling it 
** TODO [#C] allow specifying whether an operator "needs" spaces around
   it or not 
** TODO [#C] License issue of CygWin 
** TODO [#C] More Pillow examples (from the TPLP paper) 
** TODO [#C] make a separate distribution with only examples?  (these
   could also be used as test suites [maybe not performance, just tests
   of every Ciao Prolog detail])  (???)
** TODO [#C] Use ':- persistent_dir(queue_dir,'./pers').' instead of
   'persistent_dir(queue_dir,'./pers').'; or, at least, define style
   rules 
** TODO [#C] go over libbrowser.pl (it gives some errors now); maybe give
   a keyword search interface in emacs; give it more importance in the
   manuals 
** TODO [#C] ?- X = 1+X, Y is X. gives segmentation fault, ?- X = 1 + X.
   does not end (loops when printing); several messages regarding that 
** TODO [#C] look at the UWIN development environment
   (http://www.research.att.com/sw/tools/uwin/)
** TODO [#C] module names need to be globally unique within every
  application --- not only in a directory; maybe some name-mangling
  can alleviate that, and also make it more difficult to jump over the
  module system? 
** TODO [#C] use module aliases instead of module names? (Paco's proposal) 
** TODO [#C] study PLN (functional extension to SICStus) 
** TODO [#C] add Ciao tutorial slides to Ciao site; add frame with
   license 
** TODO [#C] license of the clp(Q,R) package 
** TODO [#C] Look at CIDER
   (http://www.informatik.uni-kiel.de/~pakcs/cider/), a graphical
   development environment for Curry 
** TODO [#C] Craft a hash_term predicate to be used with
   library(indexer) 
** TODO [#C] check how well we perform at the Language Shootout
   (http://www.bagley.org/~doug/shootout/), maybe accessing the internal
   hash for atoms 
** TODO [#C] Enhance Ciao compatibility mode! 
** TODO [#C] Declarative & backtrackable IO 
** TODO [#C] graphics library for B-Prolog (CGLIB) www.probp.com/cg.html 
** TODO [#C] make it possible to disable read buffering in sockets
** TODO [#C] CIAOLIB and CIAOALIASPATH -- there are several messages on
   this
** TODO [#C] hackers, users, and announcements mailing lists? 
** TODO [#C] ciaoengine as library, clarify interface for loading and
   calling modules 
** TODO [#C] bytecode support by the Linux kernel 
** TODO [#C] Port to FreeBSD 
** TODO [#C] Pack the FreeBSD port to make sure it is easy to install in FreeBSD machines 
** TODO [#C] https with Pillow 
** TODO [#C] Improve, unify, and make easy to choose which persistent
         database is to be used 
** TODO [#C] Decide what goes in .itf and what goes in .asr (e.g., what
         are their roles; think of speed concerns 
** TODO [#C] Interest of analyzing non-native props (there is an
         example) 
** TODO [#C] Test VRML interface back to work (is VRML still being
         used?) 
** TODO [#C] Make CLP(FD) visualization live again 
** TODO [#C] Make APT visualization live again (the existing binary is
        partially working!) 
** TODO [#C] memory leaks in prolog_find_file? 
** TODO [#C] Ciao in Linux PPC?
** TODO [#C] compiling files in the 'user' module which load .pl files
   which in turn are interfaces to C code does not compile the C
   files. 
** TODO [#C] CIAOALIASPATH does not work for dynamically loaded code
   (especially, .so files) 
** TODO [#C] Document (and make it easier) how to call Ciao Prolog from
   C/C++ 
** TODO [#C] Use (main) memory as cache for (designated views of) external
   database tables; make it transparent and automatic; ensure
   consistency is maintained
** TODO [#C] Syntax for writing constants in CLP(Q) 
** TODO [A] Be careful about idiomatic changes in gcc command line
   options 
** TODO [#C] [concurrent] data which have immediate update semantics
  (e.g., for communicating threads without waiting, and for
  implementing current_stream more easily! 
** TODO [#C] syntax errors and executable / .po generation (clear .po
  after linking / loading if errors detected?  generate .err file?) 
** TODO [#C] Save data structure states 
** TODO [#C] Recompile old .po files to new .po versions automatically
  (probably if using some special command line option)---at least give
  a more informative message 
** TODO [A] Be careful about the compiler not recompiling / consulting
  unneeded .pl files 
** TODO [#C] Look at the Oz Installer
  (http://www.ps.uni-sb.de/~duchier/ozInstall):

  "This was compiled on redhat 7.2 and is essentially a
  self-extracting archive with a statically-linked wizard-style GUI.
  It should probably work on all recent i486 compatible linux distros
  (with GTK).  It contains a full Mozart installation using current
  CVS release branch." 
** TODO [#C] Oz proposal of FLI using message boxes 
** TODO [#C] Make internal management of file paths independent from
   O.S. paths --- i.e., make them more general, allow for URIs, etc. 
** TODO [#C] arrays (even if only single-assignment) in Prolog; look at
   the discussions with Antonio Costa and to the programs at
   /home/clip/Systems/ciao/benchmark/Antonio, and also messages with the
   subject "Arrays: the sad story", "More on arrays", and "some
   experiments and program transforms" 
** TODO [#C] compiling big programs with the compression flag (ciaoc -z)
   breaks 
** TODO [#C] make eng. creation behave better if a non existent predicate
   is called (related to exceptions!) 
** TODO [#C] go through all the conc.-related bugs, correct them, make
   test suites for all of them 
** TODO [#C] program running on a thread that uses if/3 hangs, but if this
   predicate is replaced with -> and ; then the program works OK 
** TODO [#C] create and- and or-parallelism libraries using threads 
** TODO [#C] get Ormazabal code, study it, solver problems, report on them
   (messages with subject "malas noticias")
** TODO [#C] retractall_fact/1 in persdb (and other persistent database
   interfaces) 
** TODO [#C] make sure persdb still works in Windows and MacOSX 
** TODO [#C] See if timing primitives work well in Win. In Win2000 runtime (as apposed to walltime) can be now made to measure processing time. 
** TODO [#C] style guide as to when to use and assertion and when to use a
   fact in order to, e.g., communicate options to a package 
** TODO [#C] study HiLog/F-Logic 
** TODO [#C] make sure the use of file_lock and file_unlock is consistent
   with its semantics! 
** TODO [#C] remember to install mysql with the same users and passwords
   (which ones? avoid system-wide used passwords and users!), in order
   not to break previous tests 
** TODO [#C] proposal on caching calls to facts (package 'cache') 
** TODO [#C] message on using factsdb, persistent, and library symfnames
   at the same time 
** TODO [#C] general improvement of translator to SQL: error handling,
   mode awareness, etc. 
** TODO [#C] persistent_dir(trace_db,'.'). raises an error 
** TODO [#C] unify remote and actmods 
** TODO [#C] create libraries implementing levels of remote communication:
   strings, terms, compressed terms (fastrw), XML-based (for
   transportation under port 80) 
** TODO [#C] libraries for remote startup of Ciao Prolog daemons 
** TODO [#C] look at the JADE/CIAO multiagent programming
   platform 
** TODO [#C] decide on many issues on distributed programming support
   (read messages)
** TODO [#C] Windows 2000 undoes binding of .pl files when it is open by
   notepad 
** TODO [A] ensure compatibility of ciao-mode with emacs/NTemacs/MacOSX
   emacs/xemacs 
** TODO [#C] path names for prolog files generated under Windows by
   emacs 
** TODO [#C] (require 'imenu) and (setq mercury-imenu-generic-expression
   ...) to have a fast menu/speedbar with al definitions of predicates,
   types, etc 
** TODO [#C] Every File Format in the World: decide on suffixes for
   modules, packages, object files, assertion files, and interface
   files 
** TODO [A] Mac OS X and per-user initialization files: where to put
   them
** TODO [#C] keep up to date with newer releases of Mac OS X 
** TODO [#C] generate desktop entries for Gnome and KDE 
** TODO [#C] .pl association in windows? 
** TODO [#C] permissions: groups, per-person groups... crontab to set
   permisisons right (but these might leave installation errors
   untested...) 
** TODO [#C] write module to make it easier to bind command line options
   with explanations and with (possibly) database facts 
** TODO [#C] directory-based initialization files
** TODO [#C] install and test XonX (http://mrcla.com/XonX/), GNU-Darwin
   (http://sourceforge.net/projects/gnu-darwin/) 
** TODO [#C] LaTeX mode to write Ciao Prolog programs (probably easy to do
   as a art of listings.sty, but the package itself is not behaving
   really well, and it is not being included in some LaTeX
   distributions) 
** TODO [#C] update, improve, test tcl/tk package (basic and
   object-oriented), connect with vtcl ?
** TODO [#C] Call Prolog from Tcl? 
** TODO [#C] ship tcl/tk with Ciao?  (Mozart does it) 
** TODO [#C] Mozart QTHML (http://www.info.ucl.ac.be/people/ned/qhtml)
   GUI toolkit 
** TODO [#C] study WxWindows (http://www.wxwindows.org/) (OS-independent
   GUI builder) 
** TODO [#C] Currying explicitly marked (Van Roy's message)
** TODO [#C] SOAP interface 
** TODO [#C] httpd server functionality
** TODO [#C] XML/HTML pretty printing
** TODO [#C] Compile list of applications written in Ciao? 
** TODO [#C] multifile:Goal treated as multifile:call(Goal) 
** TODO [#C] RDF parser 
** TODO [A] Make sure sockets & java interface work in windows 
** TODO [#C] whould the foreign C interface recompile C files when making
   a .po? 
** TODO [#C] http://www.sics.se/isl/agentbase/docs/example_jeval_single.html
   (agent programming + java) 
** TODO [#C] Thread-safe operations from Java (related messages in the
   SICStus Prolog list) 
** TODO [#C] XUL (XML-based User interface Language)
   http://www.oasis-open.org/cover/xul.html 
** TODO [#C] Alternatives to DaVinci to display graphs? 
** TODO [#C] Lift (how?) 256Mb limit on stack sizes; find out what is the
   limit of the dynamic database size; add that information to the manual 
** TODO [#C] strings as low-level data type 
** TODO [#C] How to write 'infinite' and 'undefined' numbers 
** TODO [#C] multifile & data in shell
** TODO [#C] fulliso package to make builtins behave as totally ISO
   compliant by rewriting them in Prolog --- probably the same code an
   analyzer would generate 
** TODO [#C] compile regular expressions
** TODO [#C] multi-argument indexing (needs hash_term --- based on
   interface to the internal atom hash?) 
** TODO [#C] better documentation of concurrent access to facts
** Archive							    :ARCHIVE:
*** DONE [#C] When ciao comes up by default it should be as similar to a
    CLOSED: [2010-01-08 Fri 10:55]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 10:56
    :END:
   standard Prolog as possible (iso+classic). Statistics is not
   included in classic (expected by most users).  
*** DONE [#C] Generate COMPREHENSIVE test suites (there is an initial seed
    CLOSED: [2010-01-08 Fri 10:57]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 10:57
    :END:
    right now); look at all the messages (specially Ciao-Releases) to see
    what things usually go wrong; automate the process of compiling and
    testing in several architectures 
*** DONE [#C] Graphical installation in Windows 
    CLOSED: [2010-01-08 Fri 10:58]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 10:58
    :END:
*** DONE [#C] Rebuild every night, run correctness tests. Build-breakers are called
    CLOSED: [2010-01-08 Fri 11:05]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:05
    :END:
              and asked to fix the bug quickly. Have a release of the day. 
*** DONE [#C] Improve test harness. Incorporate /home/clip/Systems/ciao/shell/tests 
    CLOSED: [2010-01-08 Fri 11:05]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:05
    :END:
*** DONE [#C] Really get it to run on PDAs and **a wearable**. Buy a PDA or use the one we have. 
    CLOSED: [2010-01-08 Fri 11:06]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:06
    :END:
*** DONE [#C] Strongarm on Linux: cross-compiled with gcc dealing with inputs, etc.
    CLOSED: [2010-01-08 Fri 11:06]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:06
    :END:
*** DONE [#C] Why is the ~ needed?
    CLOSED: [2010-01-08 Fri 11:07]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:07
    :END:
   # :- function mylist/1.
   #
   # mylist := [].
   # mylist := [_|~mylist]. 
*** DONE [#C] Port CHR http://www.pms.informatik.uni-muenchen.de/~webchr
   CLOSED: [2010-01-08 Fri 11:12]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:12
    :END:
http://www.pst.informatik.uni-muenchen.de/~fruehwir/chr-solver.html
http://www.pst.informatik.uni-muenchen.de/~fruehwir/chr-intro.html 
*** DONE [#C] There should be a SICStus compatibility  option (at least in the
    CLOSED: [2010-01-08 Fri 11:13]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:13
    :END:
              prolog shell, and also in ciaoc) so that it starts with format,
              ttyout, dec10_io, etc. already loaded...
              [dec10] o [edinburgh] o [lib]. Should be by default!! 
*** DONE [#C] Simple optimization of arithmetic & misc. builtins as Prolog
    CLOSED: [2010-01-08 Fri 11:29]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:29
    :END:
          to Prolog transformations using mode/type inference and
          specialized builtins 
*** DONE [#C] compilation procedure should be smarter w.r.t. non-existing
    CLOSED: [2010-01-08 Fri 11:34]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:34
    :END:
    capabilities (i.e., libmysql) 
* Ciao (more)
** TODO ciaoc does not generate good execs that use the f.f.i 
** TODO =evaluate= could be optimized by throwing exceptions	      :JF:RH:
   It currently returns the same value, expecting that the code that
   calls evaluate checks if it is a number. If we throw the exception
   directly, that code is simplified.
** TODO try-catch-finally is missing in Ciao				 :JF:
** TODO Go over visibility (e.g., :- dynamic is OK with no packages)	 :JF:
** TODO Move files from ciao/engine to ciao/lib/engine			 :JF:
   C files belong to the engine! (like in optim_comp)
** TODO Remove the unfolded copy of c_unify from wam loop?		 :JF:
   That made optim_comp faster. Check it makes the default engine
   faster too.

** TODO .po files in a separate directory				 :JF:
   (Backport from optim_comp)
** TODO Use 64-bit tagscheme in optim_comp when possible		 :JF:
   Now it uses 32-bit mode in 64-bits by default.

   Option 1 (Easy):
   - Generate a 64-bit compiler from the 32-bit compiler if a 64-bit
     environment is found.

   Option 2 (Complete):
   - Keep 32 and 64-bit bootstrap compilers.

   The second option is similar to supporting multiple back-ends.

** TODO Run optim_comp testsuite in Ciao tests				 :JF:
** TODO Better integration between assertion reading and compiler	 :EM:
   Currently the option unused_pred_warnings and the run-time checker
   share the methods to read assertions when compiling.  We have to
   remove duplicated logic and to give it a more compositional design.
   To do that I am implementing the flag read_assertions (and the
   corresponding option in the compiler as well), that enable reading
   (and syntactic checking) of assertions at compilation time.  After
   that, tools like the run-time check package or the option
   unused_pred_warnings can use such assertions in its implementation.

   Such option will be enabled by default, to avoid that programmers
   write assertions that are not sintactically correct.

** TODO Debugger improvement						 :EM:
*** These options should be sticky: d, w and p (and v).
*** 
***  Output of variables is too similar to what we have in the result of a goal (must be different).
**** Before:
?- prueba:atom_to_term('f(a)',T).
   1  1  Call: prueba:atom_to_term(f(a),T) ? 
   2  2  Call: streams_basic:pipe(ReadFrom,WriteTo) ? 
   2  2  Exit: streams_basic:pipe($stream(-613751,3),$stream(-31331,4)),
ReadFrom = $stream(-613751,3),
WriteTo = $stream(-31331,4) ? 
   3  2  Call: io_basic:display($stream(-31331,4),f(a)) ? 
**** Our wish:
?- prueba:atom_to_term('f(a)',T).
   1  1  Call: prueba:atom_to_term(f(a),T) ? 
   2  2  Call: streams_basic:pipe(ReadFrom,WriteTo) ? 
   2  2  Exit: streams_basic:pipe($stream(-613751,3),$stream(-31331,4)),
           ReadFrom = $stream(-613751,3),
	   WriteTo = $stream(-31331,4) ? 
   3  2  Call: io_basic:display($stream(-31331,4),f(a)) ? 

**** Our wish:
?- prueba:atom_to_term('f(a)',T).
   1  1  Call: prueba:atom_to_term(f(a),T) ? 
   2  2  Call: streams_basic:pipe(ReadFrom,WriteTo) ? 
   2  2  Exit: streams_basic:pipe($stream(-613751,3),$stream(-31331,4)),
           ReadFrom#3254 = stream(-613751,3),
	   WriteTo#2123 = stream(-31331,4) ? 
           ReadFrom(3254) = stream(-613751,3),
	   WriteTo(2123) = stream(-31331,4) ? 
           ReadFrom_3254 = stream(-613751,3),
	   WriteTo_2123 = stream(-31331,4) ? 
           ReadFrom _3254 = stream(-613751,3),
	   WriteTo _2123 = stream(-31331,4) ? 
           ReadFrom | _3254 = stream(-613751,3),
	   WriteTo | _2123 = stream(-31331,4) ? 
   3  2  Call: io_basic:display($stream(-31331,4),f(a)) ? 

** Add pred definitions to assertion language				 :EM:
** Add new fields to op declarations (utf representation, latex repr, ...) :EM:
** Ciao Module System
*** Hierarchical modules						 :JF:
** Add (optional) support for 'readline'
   (for people that does not like emacs)
** Brainstorm about exceptions
*** Continuation-based vs failure-based (different things)
** Support in the assertion language for meta-arguments

#+begin_example
:- comment(bug, "TODO: To figure out how to write assertions for
	meta-predicates (note that the meta must be specified using
	assertions).  Suggested by Manuel Hermenegildo. --EMM

Example:

:- pred map_int(X, Y, Z) :: list(X, int), list(Z, int) : mapping(Y).

:- prop mapping(G(A, B)) :: int(A), int(B). % Here is the trick

:- prop mapping(_(+A, -B)) :: int(A), int(B). % Here is the trick


% Concrete example of 2nd argument of map_int/3:

:- pred map_identity :: int * int + mapping.

map_identity(X, X).

:- pred map_plus_constant :: int * num * int + mapping.

map_plus_constant(X, C, Y) :- Y is X + C.

:- pred this_is_not_an_int_mapping/2 :: atm * atm.

this_is_not_a_mapping(X, X).

").
#+end_example

* CiaoPP
** ciaopp should check the declarations and see if they coincide with
  the types given in their decl declarations! (would certainly detect
  a lot of errors in, e.g., the comments for pl2texi)
** TODO [#C] Fix modes (they do not work)				 :PB:
** TODO [#C] Assertions for metapredicates				 :CV:
** TODO [#C] Type library						 :PL:
** TODO [#C] Modular analysis						 :JE:
** TODO [#C] Module interface						 :PB:
** TODO [#C] Migration of fixpoints					 :CV:
** TODO [#C] Migration of specialization				 :GP:
** TODO [#C] Migration of transformation/checking			 :PB:
** TODO [#C] Migration of other analyses				 :PL:
** TODO [#C] Use Parma for complexity analysis?				 :PL:
** TODO [#C] Add pat(R) to PLAI (suggested by Codish) 
** TODO [#C] Installation procedure.					 :PB:
** TODO [#C] Start thinking about diagnosis. One idea in diagnosis: if
  you don't like a type, you write right there what you expected. We
  can do this by going back and adding an assertion. Advantage with
  other apporaches: there the change is forgotten? (Not refected back
  in source). Error location by looking at analysis tree. 
** TODO [#C] Drastically improve manual, explain well the use of types, etc. 
** TODO [#C] One module analysis				   :PB:GP:BE:
** TODO [#C] Full modular analysis/debugging/optimization	   :PB:GP:BE:
** TODO [#C] Read/write assertions correctly     
** TODO [#C] Post CiaoPP tutorial slides and paper on site 
** TODO [#C] Integration of Partial Evaluation and Abstract Interpretation. Widenings for partial evaluation :GP:CV:
** TODO [#C] Static negation
** TODO [#C] Dynamic negation
** TODO [#C] Improve assertion language
** TODO [#C] Improve CiaoPP tutorial 
** TODO [#C] Backwards analysis 
** TODO [#C] Type checking: simply check that a program is well-typed in one iteration :PB:
** TODO [#C] Use assertions for communication? 
** TODO [#C] Separate some analyses (e.g. argument sizes from cost, etc.) 
** TODO [#C] Generating distributions					 :PB:
** TODO [#C] testing on different platforms				 :GP:
** TODO [#C] Licensing							 :GP:
** TODO [#C] Alternative structures in sharing domain 
** TODO [#C] 'Safety' analysis
** TODO [#C] Integration of Incremental Fixpoint Algorithms		 :GP:
** TODO [#C] Identify incremental changes 
** TODO [#C] Dump/restore intermediate analysis state 
** TODO [#C] Complete handling of analysis of builtins through assertions
** TODO [#C] Analysis of attributed variables
** TODO [#C] Think about optional 'generating control' transformations, i.e., reordering goals a la mercury for different declared modes so that the dataflow works properly. 
** TODO [#C] Set of benchmarks (port older to Ciao, new ones). Special benchmarks to stress the handling of all features of the language 
** TODO [#C] Reactivate delay analysis, Delay functions, analysis of new Ciao primitives :PB:MG:SM:
I AM HERE
** TODO [#C] Type analysis (inference) using PLAI , comparison with other approaches Type analysis (inference) using PLAI , comparison with other approaches :PB:CV:
** TODO [#C] Efficient type analysis based on set constraints  Efficient type analysis based on set constraints :JG:
** TODO [#C] Widenings Widenings
** TODO [#C] Language independence / Module-system independence Language independence / Module-system independence
** TODO [#C] Improved non-failure, determinism -> termination, cardinality Improved non-failure, determinism -> termination, cardinality :PL:
** TODO [#C] Move non-failure, determinism, cost etc., to PLAI Move non-failure, determinism, cost etc., to PLAI
** TODO [#C] New parallelization with cost/granularity control/data size analysis New parallelization with cost/granularity control/data size analysis
** TODO [#C] Cost based on profiling Cost based on profiling
** TODO [#C] Distributed execution based on cost Distributed execution based on cost
** TODO [#C] Diagnosis -- abstract diagnosis: locate errors based on analysis graph Diagnosis -- abstract diagnosis: locate errors based on analysis graph
** TODO [#C] Better transformation of run-time tests (so that they are optimized by the abstract partial evaluator) Better transformation of run-time tests (so that they are optimized by the abstract partial evaluator)
** TODO [#C] Sharing based on set-based analysis Sharing based on set-based analysis
** TODO [#C] Comparison of set-based analysis and type analysis Comparison of set-based analysis and type analysis :JG:PB:CV:
** TODO [#C] Implement all Full Prolog analysis solutions (ESOP)  Implement all Full Prolog analysis solutions (ESOP) 
** TODO [#C] Simpler interface / two sets of menus (simple commands, super-options) Simpler interface / two sets of menus (simple commands, super-options)
** TODO [#C] Make level of multi-variance adjustable Make level of multi-variance adjustable
** TODO [#C] Test-data generation (White -box) (from covering analysis) Test-data generation (White -box) (from covering analysis) :PL:
** TODO [#C] Flag for using only types defined by the user in analysis and/or in printing Flag for using only types defined by the user in analysis and/or in printing
** Archive							    :ARCHIVE:
*** DONE [#C] Suport orders O(...) of complexity			 :PL:
    CLOSED: [2010-01-08 Fri 11:47]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:47
    :END:
*** DONE [#C] Assertions for builtins					 :CV:
    CLOSED: [2010-01-08 Fri 11:47]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:47
    :END:
*** DONE [#C] User interface (menu, etc.)				 :DT:
    CLOSED: [2010-01-08 Fri 11:47]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:47
    :END:
*** DONE [#C] Static Assertion Checking					 :GP:
    CLOSED: [2010-01-08 Fri 11:50]
    :PROPERTIES:
    :ARCHIVE_TIME: 2010-01-08 Fri 11:50
    :END:
* LPdoc
** More than one/two levels in parts				      :JF:DI:
   Partially supported in normal backends but it does not work in 'info'.

** Add dependency to external 'convert' tool somewhere
   (it could be in the Manifest.pl of LPdoc)
** Note buggy texinfo.tex (patched version --compare it to RH4.1 one)
** TODO [#A] configurable/more descriptive colophon

:  Copyright 1990-2012, Python Software Foundation.
: The Python Software Foundation is a non-profit corporation. Please donate.
: Last updated on Aug 23, 2012. Found a bug?
: Created using Sphinx 1.0.7.
** TODO [#A] small logo icon at the top navigation bar (also for page icon)
** TODO [#A] More intelligent separation in pages
   (depending on title, abstract, module documentation, size of the
   sections, etc.)
** TODO [#C] Generate help files to be loaded in top levet for help/1 command
** TODO [#C] Fidn missing 1.9 bufixes (see 2.0 too). 			 :MH:
** TODO [#C] See list of comment(bug, inside lpdoc files 		 :MH:
** TODO [#C] lpdoc should be able to generate changelog files in several formats (and at different levels of detail) to put in the distribution sites. :MH:
** TODO [#C] When an index is empty, texi2html leaves a funny 'Jump to' message? :MH:
** TODO [#C] Find a better way to coexist with SVN 			 :MH:
** TODO [#C] Merging of changelogs (Boris?) 				 :MC:
** TODO [#C] Fix pdf output, make it default Acroread/hyperref/dvipdfm (all in new TeX?) :MH:
** TODO [#C] HTML should be generated without any external tool (for Windows) :MH:
** TODO [#C] Recheck docbook (latest in in gnome web site)		 :MH:
** TODO [#C] Prettify `vc-print-log' output				 :MH:
** TODO [#C] comment(bug,... & comment(limit,... (limitation)		 :MH:
** TODO [#C] In package documentation you always get in 'Other modules used' all :MH:
  ISO modules, which is not true. Not easy to get that info?
** TODO [#C] Would be great to automatically add a search engine to generated sites :MH:
** TODO [#C] Write a code formatter: takes Ciao code and generates	 :MH:
  html/LaTeX/etc/ for it (with bold, colors, etc.). The include
  command should allow an offset to skip the first lines (ops, etc.).
** TODO [#C] Is there an error list with explanations?			 :MH:
** TODO [#C] Declarations do not seem to be documented unless there is a comment/2 :MH:
      doinclude from them! Fixed for now adding such comment...????
  Not really a bug: necessary only in a module because not exported. 
  Better: doc as package properly:
#+begin_example
  :- use_package(assertions).
  :- comment(filetype,package).
  :- comment(nodoc,assertions).
#+end_example
  
** TODO [#C] ciao.html -> ciao_manual.html, ciao(.html)			 :MH:
** TODO [#C] comment/2 (From Isabel: element is a list of XVectors)	 :MH:
** TODO [#C] (lpdoc interface) visualize a .lpdoc file (generating .pl in tmp). :MH:
** TODO [#C] fix author indexing fix author indexing			 :MH:
** TODO [#C] document exceptions, flags, side effects document exceptions, flags, side effects :MH:
** TODO [#C] Do not print local version if global version. Do not print local version if global version. :MH:
** TODO [#C] Generation (.asr?): with or without fast/write depending on flag. :MH:
   Leave mark at the beginning saying type of encoding. Thus, it is
   always possible to read.
** TODO [#C] In javadoc, you can indicate in the command line whether you want :MH:
    to generate documentation for the public elements, private, or both.
    Would be nice also in lpdoc.
** TODO [#C] predicate not documented in following code if % is deleted: :MH:
#+begin_example
  :- true pred make_exec(File, ExecName)
  %        :: atm(ExecName)
        : sourcenames(File) => atm(ExecName)
        # "Make a Ciao executable from file (or files) @var{File}, ... ". predicate not documented in following code if % is deleted:
#+end_example
** TODO [#C] Existe un curioso efecto lateral al hacer ahora el manual de Ciao. :MH:
  Cuando se usa la propiedad predname/1 (parece que solo ocurre con
  esta) aparece su definicion DOS veces, pero se arregla inmmediatamente
  si se corre el manual con 
  setenv CIAOLIB /home/clip/Systems/ciao Existe un curioso efecto lateral al hacer ahora el manual de Ciao.
** TODO [#C] lpdoc should send comment(pred/N, "comment") to .asr files to allow :MH:
  including them in reexported predicates (currently only pred, calls,
  etc. used).
** TODO [#C] reexport documentation appears twice			 :MH:
   Cuando se importa un modulo del que *ademas* se reexportan cosas, la
   documentacion de los reexports sale DOS veces.
   Deberia controlarse al documentar imports con doinclude que no sea
   tambien un reexport.
** TODO [#C] variable names in assertions				 :MH:
#+begin_example
    :- comment(keysort(List1,List2),"@var{List1} is sorted ...").
    :- trust prop keysort(+list(keypair),?list(keypair))
    # "@var{List2} is the (key-)sorted list corresponding to @var{List1}.".
#+end_example
  De todas maneras lo de poner nombres de variables si no aparecen en la
  cabeza le hace un lio...
  Ya, pero lo puse asi porque:
#+begin_example
    :- trust prop keysort(+list(List1,keypair),?list(List2,keypair))
    # "@var{List2} is the (key-)sorted list corresponding to @var{List1}.".    
#+end_example
** TODO [#C] multifiles? -- see messages from Paco and Daniel.		 :MH:
** TODO [#C] Check out http://www.cse.unsw.edu.au/~chak/haskell/haskell-style.html :MH:
** TODO [#C] Check latex mercury style 					 :MH:
** TODO [#C] LPdoc 							 :MH:
  % ./lib/engine/builtin_directives.pl
  ./lib/engine/data_facts.pl -> changed
  % ./lib/engine/loading_code.pl
  % ./lib/engine/modules.pl
  ./lib/engine/prolog_flags.pl -> changed
  % ./lib/engine/syntax_extensions.pl
  % ./lib/foreign_interface/foreign_interface_properties.pl
  % ./lib/regtypes/regtypes_doc.pl
  % ./lib/dynamic.pl
  % ./library/actmods/actmods_doc.pl
  % ./library/class/class_doc.pl
  % ./library/interface/interface_doc.pl
  % ./library/objects/objects_doc.pl
  ./library/persdb/persdbrt.pl -> changed
  ./library/persdb_sql/persdbrt_sql.pl -> changed
  ./library/persdb_mysql/persdbrt_mysql.pl -> changed
 - LPdoc:
  % ./lib/engine/builtin_directives.pl
  ./lib/engine/data_facts.pl -> changed
  % ./lib/engine/loading_code.pl
  % ./lib/engine/modules.pl
  ./lib/engine/prolog_flags.pl -> changed
  % ./lib/engine/syntax_extensions.pl
  % ./lib/foreign_interface/foreign_interface_properties.pl
  % ./lib/regtypes/regtypes_doc.pl
  % ./lib/dynamic.pl
  % ./library/actmods/actmods_doc.pl
  % ./library/class/class_doc.pl
  % ./library/interface/interface_doc.pl
  % ./library/objects/objects_doc.pl
  ./library/persdb/persdbrt.pl -> changed
  ./library/persdb_sql/persdbrt_sql.pl -> changed
  ./library/persdb_mysql/persdbrt_mysql.pl -> changed

** TODO [#C] Look at: 							 :MH:
  Me he hecho esta funcin para sacar cdigo Prolog en LaTeX,
  lamentablemente no sale la negrita en tt.  Por cierto, que el entorno
  alltt hace lo mismo que el verbatim de pl2texi!

* Ciao Bot (automated server for tests and dist generation)
** TODO Add a crontab (or similar) to check that machines are connected to the network
* Ideas from JINNI

All addressing thorugh URL (because they are bad but they work and are
'there') --> make all builtins take URLs! (through a library).


JINI:
- Discovery (object says hello)
- Brokerage service
(spontaneous networking) (but not by broadcasting - that does not scale)

- RMI (RPC)
- Distributed events
- Security (on top of the default Java Security)
- 2-phase Commit protocol
- Distributed resource collection: e.g., files are closed
  automatically when not needed (e.g., in case net goes down things
  don't stay in transitory states). You want resources to get freed up
  automatically. LEASES: Resource requests are made with a time estimate (the
  resource grant comes back perhaps with another time period granted)
  Leasing should be done in human time periods, rather than computer
  time periods.
- Services: Java spaces (distributed linda-like systems), printers,
  cameras, etc.: get plugged in, and announce themselves on the network.

Services provide their own driver code. Code moves from the service to
the client at brokerage: no need for device drivers. 
The loopup service is by service "type" rather than by string.
E.g., a printer implements the color printer service (a subtype of the
printer type). When you ask for something you get at least what you
asked for, maybe more.


Jini service                                     look-up service
------------------------------------------------------------------------
Discovery request (announcement) -> 
       <- Discovery response (with an implementation of the lookup interface!)
          (defines protocol, etc, - e.g., they can 
Service lookup request (Sends service code) -> 
          

Same with clients, except you send a client request ->
        <- send the implementation of the service interface that got
        put in by the service

From then on they talk directly to each other (Jini is out of the picture)

The service can change over time: registers a new code
If it is a subtype of the previous one, it can still work for the ones
that received the older version.

Finding services: by their Java type. Subtype can be returned. Entry
can have other attributes. Attributes are Java objects. 

Leaving the network: Services can cancel lookup registration. Also,
registrations are leased: if lease is not renewed, registration is
dropped. Service proxies can also be leased.  Zero-admin joining and
leaving.

Two services implementing the same interface are distinguised by their
attributes. 

They think the language to language interface should not be at the
network interface (e.g., C and Java on each side of the wire) but
rather at the engine level (Java-C interface).

You can get source code (by signing).

* Ciao Libraries
** PiLLoW/XML libraries:
*** DTDs as types! Experiment with it...
*** Do pillow pages/distribution need update?
*** Move stuff in "trouble_shooting" from pillow demo directory to Ciao
   manual. Improve PiLLoW documentation by incorporating relevant 
   parts of the paper. 
*** ~rsiles/public_html/cgi-bin/ PilloW Spider: add as example?
*** improve XML handling, XDR/XPATH libs, etc.
* Ciao Webpage
** Renaming section with better names					 :JF:
   (Remember that to refer to a section in lpdoc you refer to the
   title of the section -- Even in other manuals!! DO A GREP)
** Reorganizing chapters / megapackages (e.g. classic)
*** Ideas:
**** Put all effort into describing Ciao, add chapters to describe Prolog
     compatibility, etc.
** This is a Section Name / This is a section name ?			 :JF:
   First one is better.
** Clean "Miscellaneous standalone utilities"
   e.g. "A Program to Help Cleaning your Directories"
   
** Archive							    :ARCHIVE:
*** DONE Rename "Ciao IDE" by "About"					 :JF:
    :PROPERTIES:
    :ARCHIVE_TIME: 2012-08-01 Wed 17:22
    :END:
*** DONE Menu on the left						 :JF:
    :PROPERTIES:
    :ARCHIVE_TIME: 2012-08-01 Wed 17:22
    :END:
*** DONE Eventually, use Lpdoc to generate all the web page		 :JF:
    :PROPERTIES:
    :ARCHIVE_TIME: 2012-08-01 Wed 17:22
    :END:
*** DONE Missing link to "trac"						 :JF:
    :PROPERTIES:
    :ARCHIVE_TIME: 2012-08-01 Wed 17:22
    :END:
*** DONE Annotated Prolog library ==> The Assertion Language		 :JF:
    :PROPERTIES:
    :ARCHIVE_TIME: 2012-08-01 Wed 17:22
    :END:
* Ciao Distribution/Installation
** Finish Mac package							 :RH:
** Install CiaoDE icon in the Apps/Programming menu			 :EM:
   In Windows: ciao,ciaopp,install,uninstall,manuals,etc.
   In Linux: ciao,ciaopp,manuals
** Downloader: change style to new web page                              :JF:					 
** Downloader: generate statistics 					 :JF:					 
** Make full Ciao compilation faster					 :JF:
   This has to do with optimcomp integration
* Ciao Tests
** Getting the tests and run-time tests to work for all CiaoDE		 :EM:
** Compile for more O.S.						 :EM:
*** Newer Fedora 
*** Solaris
*** Vista
** Add a test for compiling with runtime checks enabled 		 :EM:
** Add OptimComp tests							 :JF:
** Test several interesting abstract machine variations			 :JF:
*** Pick two or three intereting tagging schemes
* Mailing lists
** Move Ciao lists to mailman						 :JC:
** Incorporate old mails to mailman web pages				 :JC:
** Take current subscribers to mailman 					 :MC:
** Connection of downloading and subscribing
*** A single command to subscribe to mailing lists			 :JC:
*** Two download links: Subscribe and download | Just download           :JF:
**** Merge old database files about download statistics
* METATASKS (tasks for keeping track of tasks)
** Work on org exporting, etc. 						 :MH:
*** Have a look at =org-sync=
** Use org-merge with a .gitattribute
** Archive							    :ARCHIVE:
*** DONE Set up first trac site						 :JF:
    :PROPERTIES:
    :ARCHIVE_TIME: 2009-03-26 Thu 11:14
    :END:



* Archive 							    :ARCHIVE:
** DONE remove/hide deadcode in CiaoDE					 :EM:
   CLOSED: [2010-01-22 Fri 15:16]
  At revision 11642 there are at least 3366 warning about unused
  predicates (imported or implemented), that makes the
  load/compilation/installation process slower.

  Steps:

  - Remove warnings about unused imported modules or
    predicates. (Warning: some modules have side-effects, for example,
    defining multifiles, loading other modules dynamically, etc.).
  - Removed warnings about predicates implemented but not used
    (Warning: some non exported predicates could be called from the
    emulator).
 
  - The suggested order is given by the installation process, by first
    removing (or hidding) the warnings that appears when execute the
    following commands, provided that they are easy to remove:
    
    1. ./ciaosetup configure --unused-pred-warnings=yes
    2. ./ciaosetup engine
    3. ./ciaosetup compiler
    4. ./ciaosetup applications
    5. ./ciaosetup libraries

    ... and so on...
** DONE Test new argname example					 :JF:
   CLOSED: [2010-01-06 Wed 14:01]
   :PROPERTIES:
   :ARCHIVE_TIME: 2010-01-06 Wed 14:02
   :END:
   I commited this file, but I have not tested it:
   =ciaode/ciao/library/argnames/examples/test.pl=
** DONE Port argnames example to unittests				 :JF:
   CLOSED: [2010-01-07 Thu 13:45]
   :PROPERTIES:
   :ARCHIVE_TIME: 2010-01-07 Thu 13:45
   :END:
   The test is in =ciaode/ciao/library/argnames/examples/test.pl=.
   Edison suggested me to look at examples in:
   =ciaode/ciao/lib/unittest/examples/test_examples.pl=

** DONE Fix installation in testing server cliptest2			 :JF:
   CLOSED: [2010-01-08 Fri 08:58]
   :PROPERTIES:
   :ARCHIVE_TIME: 2010-01-08 Fri 08:58
   :END:
   It breaks during foreign interface compilation, because location for
   C headers points to the final directory and not the one prefixed by
   BUILD_ROOT.

   I included CIAOHDIR to fix the problem, but I have not yet tested it
   in cliptest2.
*** DONE default_c_headers_dir in version.c is wrong			 :JF:
   CLOSED: [2010-01-08 Fri 08:58]
   The root of the problem is in the "INSTALLEDINCLUDEDIR" variable.
   Do a:
: /Users/jfran/Documents/svn/ciaode/ciao$ grep -r INSTALLEDINCLUDEDIR .

   In the src installation type, installincludes is never performed,
   and the INSTALLEDINCLUDEDIR does not make sense.

   How to fix the bug: =default_c_headers_dir= should point to
   =INSTALLEDINCLUDEDIR= only if instype=ins. If not, use 
** DONE Unify (most) type names with optim_comp [53/53]			 :JF:
   CLOSED: [2010-01-11 Mon 18:29]
   :PROPERTIES:
   :ARCHIVE_TIME: 2010-01-11 Mon 18:29
   :END:
   This requires adding some typedef for structures.
   - [X] BOOL -> bool_t
   - [X] CLOCK -> instance_clock_t
   - [X] CONDITION -> condition_t
   - [X] INSN -> insn_t
   - [X] TAGGED -> tagged_t
   - [X] struct _ciao_query -> _ciao_query_t
   - [X] struct atom -> atom_t
   - [X] struct block_tree -> block_tree_t
   - [X] struct c_code_info -> c_code_info_t
   - [X] struct cost_center -> cost_center_t
   - [X] struct cost_center_item -> cost_center_item_t
   - [X] struct debugger_state -> debugger_state_t
   - [X] struct emul_info -> emul_info_t
   - [X] struct event_entry -> event_entry_t
   - [X] struct extension_regs -> extension_regs_t
   - [X] struct gcdef -> gcdef_t
   - [X] struct goal_str -> goal_str_t
   - [X] struct handler_entry -> handler_entry_t
   - [X] struct incore_info -> incore_info_t
   - [X] struct instance -> instance_t
   - [X] struct instance_handle -> instance_handle_t
   - [X] struct int_info -> int_info_t
   - [X] struct io_streams -> io_streams_t
   - [X] struct lobj -> lobj_t
   - [X] struct marker -> marker_t
   - [X] struct mem_block_str -> mem_block_str_t
   - [X] struct misc_info -> misc_info_t
   - [X] struct node -> node_t
   - [X] struct node_list -> node_list_t
   - [X] struct node_stack_item -> node_stack_item_t
   - [X] struct numstack -> numstack_t
   - [X] struct other_stuff -> other_stuff_t
   - [X] struct parallel_exec_entry -> parallel_exec_entry_t
   - [X] struct profile_currents -> profile_currents_t
   - [X] struct qlinfo -> qlinfo_t
   - [X] struct qlstream -> qlstream_t
   - [X] struct statistics -> statistics_t
   - [X] struct sw_on_key -> sw_on_key_t
   - [X] struct sw_on_key_node -> sw_on_key_node_t
   - [X] struct trie_node -> trie_node_t
   - [X] struct try_node -> try_node_t
   - [X] struct und_info -> und_info_t
   - [X] struct wam_private -> wam_private_t
   - [X] struct definition -> definition_t
   - [X] struct frame -> frame_t
   - [X] struct stream_node -> stream_node_t
   - [X] struct worker -> worker_t
   - [X] struct int_par_t -> int_par_t
   - [X] struct double_par_t -> double_par_t
   - [X] InstanceHandle -> instance_handle_t
   - [X] union definfo -> definfo_t
   - [X] Behavior -> behavior_t
   - [X] typedef struct handler -> par_handler_t
   - [X] typedef struct event -> visandor_event_t

** DONE Proper exception throwing from C builtins			 :JF:
   CLOSED: [2010-01-13 Wed 15:41]
   :PROPERTIES:
   :ARCHIVE_TIME: 2010-01-13 Wed 15:41
   :END:
*** DONE Add a EXCEPTION__CATCH block around the emulator loop
    CLOSED: [2010-01-13 Wed 15:40]
*** DONE Adding ERR__FUNCTOR in each builtin that throws exceptions
    CLOSED: [2010-01-12 Tue 10:37]
    That macro declares some private, static variables with the name of
    the predicate, so that BUILTIN_ERROR can use that to throw the
    exception. Previously in Ciao, the Func variable (that shares with
    P) was used. But that was not optimal in some cases. Moreover, when
    using longjmp to throw exceptions from C functions, that Func
    variable may no longer be recoverable.
*** DONE Put the right info in all ERR__FUNCTOR
    CLOSED: [2010-01-13 Wed 15:41]
*** use a static structure in ERR__FUNCTOR?
    It could even be a descriptor_t, but the code must be static!
    Maybe it is better to leave a name/arity and do lookup if necessary.
