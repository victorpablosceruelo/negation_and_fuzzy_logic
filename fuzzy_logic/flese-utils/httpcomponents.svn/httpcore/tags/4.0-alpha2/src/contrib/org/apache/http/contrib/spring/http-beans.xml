<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

  <bean id="global-params" 
    class="org.apache.http.impl.DefaultHttpParams" 
    singleton="true" />

  <bean id="params" 
    class="org.apache.http.impl.DefaultHttpParams" 
    singleton="false">
    <property name="defaults"><ref bean="global-params"/></property>
  </bean>

  <bean id="socket-factory" 
    class="org.apache.http.impl.io.PlainSocketFactory" 
    singleton="true" />
    
  <bean id="http-scheme" 
    class="org.apache.http.Scheme">
    <constructor-arg index="0"><value>http</value></constructor-arg>
    <constructor-arg index="1"><ref bean="socket-factory"/></constructor-arg>
    <constructor-arg index="2"><value>80</value></constructor-arg>
  </bean>
  
  <bean id="request-retry-handler" 
    class="org.apache.http.impl.DefaultHttpRequestRetryHandler">
    <constructor-arg index="0"><value>3</value></constructor-arg>
    <constructor-arg index="1"><value>false</value></constructor-arg>
  </bean>
  
  <bean id="http-executor" 
    class="org.apache.http.protocol.HttpRequestExecutor" 
    singleton="true" >
    <property name="interceptors">
      <list>
        <!-- Required request interceptors -->
        <bean class="org.apache.http.protocol.RequestContent" />
        <bean class="org.apache.http.protocol.RequestTargetHost" />
        <!-- Recommended request interceptors -->
        <bean class="org.apache.http.protocol.RequestConnControl" />
        <bean class="org.apache.http.protocol.RequestUserAgent" />
        <bean class="org.apache.http.protocol.RequestExpectContinue" />
      </list>
    </property>
    <property name="retryHandler"><ref bean="request-retry-handler"/></property>
  </bean>
  
  <bean id="http-request-factory"
    class="org.apache.http.impl.DefaultHttpRequestFactory" 
    singleton="false" />
  
  <bean id="http-response-factory"
    class="org.apache.http.impl.DefaultHttpResponseFactory" 
    singleton="false" />
  
  <bean id="http-entity-serializer"
    class="org.apache.http.impl.entity.DefaultEntitySerializer" 
    singleton="false" />
  
  <bean id="http-entity-deserializer"
    class="org.apache.http.impl.entity.DefaultEntityDeserializer" 
    singleton="false" />
  
  <bean id="http-connection" 
    class="org.apache.http.impl.DefaultHttpClientConnection" 
    singleton="false">
    <property name="responseFactory"><ref bean="http-response-factory"/></property>
    <property name="entitySerializer"><ref bean="http-entity-serializer"/></property>
    <property name="entityDeserializer"><ref bean="http-entity-deserializer"/></property>
  </bean>

  <bean id="conn-reuse-strategy"
    class="org.apache.http.impl.DefaultConnectionReuseStrategy" 
    singleton="true" />
    
</beans>
